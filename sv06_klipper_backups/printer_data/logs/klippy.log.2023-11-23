Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-8-g187cc2f1-dirty'
Untracked files: klippy/extras/gcode_shell_command.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
=============== Log rollover at Thu Nov 23 15:41:30 2023 ===============
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-8-g187cc2f1-dirty'
Untracked files: klippy/extras/gcode_shell_command.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Thu Nov 23 15:41:30 2023 (1700754090.9 40.4)
===== Config file =====
[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[mcu]
serial = /dev/serial/by-path/platform-5200000.usb-usb-0:1.3:1.0-port0
restart_method = command

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100

[stepper_x]
step_pin = PC2
dir_pin = !PB9
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_x:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_x]
uart_pin = PC1
run_current = 0.860
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 81
diag_pin = PA5

[stepper_y]
step_pin = PB8
dir_pin = PB7
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_y:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_y]
uart_pin = PC0
run_current = 0.900
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 82
diag_pin = PA6

[stepper_z]
step_pin = PB6
dir_pin = !PB5
enable_pin = !PC3
microsteps = 16
rotation_distance = 4
endstop_pin = probe:z_virtual_endstop
position_min = -4
position_max = 261
homing_speed = 4

[tmc2209 stepper_z]
uart_pin = PA15
run_current = 1.000
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
diag_pin = PA7

[extruder]
max_extrude_only_distance = 100.0
step_pin = PB4
dir_pin = !PB3
enable_pin = !PC3
microsteps = 16
rotation_distance = 4.56
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PA1
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC5
min_temp = 0
max_temp = 300
control = pid
pid_kp = 23.940
pid_ki = 1.629
pid_kd = 87.981

[tmc2209 extruder]
uart_pin = PC14
run_current = 0.550
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3

[heater_bed]
heater_pin = PA2
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 69.445
pid_ki = 1.146
pid_kd = 1052.087

[fan]
pin = PA0

[probe]
pin = PB1
x_offset = 28
y_offset = -20
samples = 2
samples_tolerance = 0.015
samples_tolerance_retries = 5
z_offset = -0.230

[safe_z_home]
home_xy_position = 85,135
z_hop = 10
z_hop_speed = 5

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 28, 20
mesh_max = 210, 205
probe_count = 10
algorithm = bicubic
fade_start = 1
fade_end = 10
fade_target = 0

[display]
lcd_type = st7920
cs_pin = PB12
sclk_pin = PB13
sid_pin = PB15
encoder_pins = ^PB14, ^PB10
click_pin = ^!PB2

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[exclude_object]

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set probe_dock_enable = kamp_settings.probe_dock_enable | abs %}
	{% set attach_macro = kamp_settings.attach_macro | string %}
	{% set detach_macro = kamp_settings.detach_macro | string %}
	{% set mesh_margin = kamp_settings.mesh_margin | float %}
	{% set fuzz_amount = kamp_settings.fuzz_amount | float %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% set fuzz_range = range((0) | int, (fuzz_amount * 100) | int + 1) %}
	{% set adapted_x_min = x_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_y_min = y_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_x_max = x_max + mesh_margin + (fuzz_range | random / 100.0) %}
	{% set adapted_y_max = y_max + mesh_margin + (fuzz_range | random / 100.0) %}
	
	{% set adapted_x_min = [adapted_x_min , bed_mesh_min[0]] | max %}
	{% set adapted_y_min = [adapted_y_min , bed_mesh_min[1]] | max %}
	{% set adapted_x_max = [adapted_x_max , bed_mesh_max[0]] | min %}
	{% set adapted_y_max = [adapted_y_max , bed_mesh_max[1]] | min %}
	
	{% set points_x = (((adapted_x_max - adapted_x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((adapted_y_max - adapted_y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	
	{% set points_x = [points_x , min_points]|max %}
	{% set points_y = [points_y , min_points]|max %}
	{% set points_x = [points_x , probe_count[0]]|min %}
	{% set points_y = [points_y , probe_count[1]]|min %}
	
	{% if verbose_enable == True %}
	{% if printer.exclude_object.objects != [] %}
	
	{ action_respond_info( "Algorithm: {}.".format(
	(algorithm),
	)) }
	
	{ action_respond_info("Default probe count: {},{}.".format(
	(probe_count[0]),
	(probe_count[1]),
	)) }
	
	{ action_respond_info("Adapted probe count: {},{}.".format(
	(points_x),
	(points_y),
	)) }
	
	{action_respond_info("Default mesh bounds: {}, {}.".format(
	(bed_mesh_min[0],bed_mesh_min[1]),
	(bed_mesh_max[0],bed_mesh_max[1]),
	)) }
	
	{% if mesh_margin > 0 %}
	{action_respond_info("Mesh margin is {}, mesh bounds extended by {}mm.".format(
	(mesh_margin),
	(mesh_margin),
	)) }
	{% else %}
	{action_respond_info("Mesh margin is 0, margin not increased.")}
	{% endif %}
	
	{% if fuzz_amount > 0 %}
	{action_respond_info("Mesh point fuzzing enabled, points fuzzed up to {}mm.".format(
	(fuzz_amount),
	)) }
	{% else %}
	{action_respond_info("Fuzz amount is 0, mesh points not fuzzed.")}
	{% endif %}
	
	{ action_respond_info("Adapted mesh bounds: {}, {}.".format(
	(adapted_x_min, adapted_y_min),
	(adapted_x_max, adapted_y_max),
	)) }
	
	{action_respond_info("KAMP adjustments successful. Happy KAMPing!")}
	
	{% else %}
	
	{action_respond_info("No objects detected! Check your gcode and make sure that EXCLUDE_OBJECT_DEFINE is happening before BED_MESH_CALIBRATE is called. Defaulting to regular meshing.")}
	G4 P5000
	{% endif %}
	
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={adapted_x_min},{adapted_y_min} mesh_max={adapted_x_max},{adapted_y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}

[gcode_macro LINE_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set verbose_enable = printer["gcode_macro _KAMP_Settings"].verbose_enable | abs %}
	{% set purge_height = printer["gcode_macro _KAMP_Settings"].purge_height | float %}
	{% set tip_distance = printer["gcode_macro _KAMP_Settings"].tip_distance | float %}
	{% set purge_margin = printer["gcode_macro _KAMP_Settings"].purge_margin | float %}
	{% set purge_amount = printer["gcode_macro _KAMP_Settings"].purge_amount | float %}
	{% set flow_rate = printer["gcode_macro _KAMP_Settings"].flow_rate | float %}
	
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	{% if purge_y_origin > 0 %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_center),
	(purge_y_origin),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% else %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_origin),
	(purge_y_center),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	{% if purge_y_origin > 0 %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_center} Y{purge_y_origin}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 X{purge_x_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% else %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_origin} Y{purge_y_center}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 Y{purge_y_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 Y{purge_y_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% endif %}
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.8
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 10
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro update_git]
gcode = 
	RUN_SHELL_COMMAND CMD=update_git_script

[gcode_shell_command update_git_script]
command = bash /home/biqu/printer_data/klipper-backup/script.sh
timeout = 90.0
verbose = True
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473383899040: New connection
webhooks client 281473383899040: Client info {'program': 'Moonraker', 'version': 'v0.8.0-202-gdddd968'}
Loaded MCU 'mcu' 112 commands (v0.12.0-0-g0d67d9c4 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA10,PA9 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Enabling TMC virtual enable for 'stepper_x'
Enabling TMC virtual enable for 'stepper_y'
Enabling TMC virtual enable for 'stepper_z'
Enabling TMC virtual enable for 'extruder'
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (0.0, 40.0)     | (28.0, 20.0)
  1   | (20.2, 40.0)    | (48.2, 20.0)
  2   | (40.4, 40.0)    | (68.4, 20.0)
  3   | (60.7, 40.0)    | (88.7, 20.0)
  4   | (80.9, 40.0)    | (108.9, 20.0)
  5   | (101.1, 40.0)   | (129.1, 20.0)
  6   | (121.3, 40.0)   | (149.3, 20.0)
  7   | (141.5, 40.0)   | (169.5, 20.0)
  8   | (161.8, 40.0)   | (189.8, 20.0)
  9   | (182.0, 40.0)   | (210.0, 20.0)
  10  | (182.0, 60.5)   | (210.0, 40.5)
  11  | (161.8, 60.5)   | (189.8, 40.5)
  12  | (141.5, 60.5)   | (169.5, 40.5)
  13  | (121.3, 60.5)   | (149.3, 40.5)
  14  | (101.1, 60.5)   | (129.1, 40.5)
  15  | (80.9, 60.5)    | (108.9, 40.5)
  16  | (60.7, 60.5)    | (88.7, 40.5)
  17  | (40.4, 60.5)    | (68.4, 40.5)
  18  | (20.2, 60.5)    | (48.2, 40.5)
  19  | (0.0, 60.5)     | (28.0, 40.5)
  20  | (0.0, 81.1)     | (28.0, 61.1)
  21  | (20.2, 81.1)    | (48.2, 61.1)
  22  | (40.4, 81.1)    | (68.4, 61.1)
  23  | (60.7, 81.1)    | (88.7, 61.1)
  24  | (80.9, 81.1)    | (108.9, 61.1)
  25  | (101.1, 81.1)   | (129.1, 61.1)
  26  | (121.3, 81.1)   | (149.3, 61.1)
  27  | (141.5, 81.1)   | (169.5, 61.1)
  28  | (161.8, 81.1)   | (189.8, 61.1)
  29  | (182.0, 81.1)   | (210.0, 61.1)
  30  | (182.0, 101.6)  | (210.0, 81.6)
  31  | (161.8, 101.6)  | (189.8, 81.6)
  32  | (141.5, 101.6)  | (169.5, 81.6)
  33  | (121.3, 101.6)  | (149.3, 81.6)
  34  | (101.1, 101.6)  | (129.1, 81.6)
  35  | (80.9, 101.6)   | (108.9, 81.6)
  36  | (60.7, 101.6)   | (88.7, 81.6)
  37  | (40.4, 101.6)   | (68.4, 81.6)
  38  | (20.2, 101.6)   | (48.2, 81.6)
  39  | (0.0, 101.6)    | (28.0, 81.6)
  40  | (0.0, 122.2)    | (28.0, 102.2)
  41  | (20.2, 122.2)   | (48.2, 102.2)
  42  | (40.4, 122.2)   | (68.4, 102.2)
  43  | (60.7, 122.2)   | (88.7, 102.2)
  44  | (80.9, 122.2)   | (108.9, 102.2)
  45  | (101.1, 122.2)  | (129.1, 102.2)
  46  | (121.3, 122.2)  | (149.3, 102.2)
  47  | (141.5, 122.2)  | (169.5, 102.2)
  48  | (161.8, 122.2)  | (189.8, 102.2)
  49  | (182.0, 122.2)  | (210.0, 102.2)
  50  | (182.0, 142.8)  | (210.0, 122.7)
  51  | (161.8, 142.8)  | (189.8, 122.7)
  52  | (141.5, 142.8)  | (169.5, 122.7)
  53  | (121.3, 142.8)  | (149.3, 122.7)
  54  | (101.1, 142.8)  | (129.1, 122.7)
  55  | (80.9, 142.8)   | (108.9, 122.7)
  56  | (60.7, 142.8)   | (88.7, 122.7)
  57  | (40.4, 142.8)   | (68.4, 122.7)
  58  | (20.2, 142.8)   | (48.2, 122.7)
  59  | (0.0, 142.8)    | (28.0, 122.7)
  60  | (0.0, 163.3)    | (28.0, 143.3)
  61  | (20.2, 163.3)   | (48.2, 143.3)
  62  | (40.4, 163.3)   | (68.4, 143.3)
  63  | (60.7, 163.3)   | (88.7, 143.3)
  64  | (80.9, 163.3)   | (108.9, 143.3)
  65  | (101.1, 163.3)  | (129.1, 143.3)
  66  | (121.3, 163.3)  | (149.3, 143.3)
  67  | (141.5, 163.3)  | (169.5, 143.3)
  68  | (161.8, 163.3)  | (189.8, 143.3)
  69  | (182.0, 163.3)  | (210.0, 143.3)
  70  | (182.0, 183.8)  | (210.0, 163.8)
  71  | (161.8, 183.8)  | (189.8, 163.8)
  72  | (141.5, 183.8)  | (169.5, 163.8)
  73  | (121.3, 183.8)  | (149.3, 163.8)
  74  | (101.1, 183.8)  | (129.1, 163.8)
  75  | (80.9, 183.8)   | (108.9, 163.8)
  76  | (60.7, 183.8)   | (88.7, 163.8)
  77  | (40.4, 183.8)   | (68.4, 163.8)
  78  | (20.2, 183.8)   | (48.2, 163.8)
  79  | (0.0, 183.8)    | (28.0, 163.8)
  80  | (0.0, 204.4)    | (28.0, 184.4)
  81  | (20.2, 204.4)   | (48.2, 184.4)
  82  | (40.4, 204.4)   | (68.4, 184.4)
  83  | (60.7, 204.4)   | (88.7, 184.4)
  84  | (80.9, 204.4)   | (108.9, 184.4)
  85  | (101.1, 204.4)  | (129.1, 184.4)
  86  | (121.3, 204.4)  | (149.3, 184.4)
  87  | (141.5, 204.4)  | (169.5, 184.4)
  88  | (161.8, 204.4)  | (189.8, 184.4)
  89  | (182.0, 204.4)  | (210.0, 184.4)
  90  | (182.0, 225.0)  | (210.0, 205.0)
  91  | (161.8, 225.0)  | (189.8, 205.0)
  92  | (141.5, 225.0)  | (169.5, 205.0)
  93  | (121.3, 225.0)  | (149.3, 205.0)
  94  | (101.1, 225.0)  | (129.1, 205.0)
  95  | (80.9, 225.0)   | (108.9, 205.0)
  96  | (60.7, 225.0)   | (88.7, 205.0)
  97  | (40.4, 225.0)   | (68.4, 205.0)
  98  | (20.2, 225.0)   | (48.2, 205.0)
  99  | (0.0, 225.0)    | (28.0, 205.0)
Starting heater checks for extruder
Stats 46.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=2721 bytes_read=5539 bytes_retransmit=9 bytes_invalid=0 send_seq=201 receive_seq=198 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=1517 upcoming_bytes=608 freq=72002244 heater_bed: target=0 temp=0.0 pwm=0.000  sysload=3.08 cputime=6.072 memavail=716804 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473383899040
webhooks: registering remote method 'reboot_machine' for connection id: 281473383899040
webhooks: registering remote method 'pause_job_queue' for connection id: 281473383899040
webhooks: registering remote method 'start_job_queue' for connection id: 281473383899040
Stats 47.4: gcodein=0  mcu: mcu_awake=0.062 mcu_task_avg=0.000155 mcu_task_stddev=0.000360 bytes_write=5108 bytes_read=5917 bytes_retransmit=9 bytes_invalid=0 send_seq=248 receive_seq=248 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004261 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=3.08 cputime=6.143 memavail=711748 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=14.7 pwm=0.000
Stats 48.4: gcodein=0  mcu: mcu_awake=0.062 mcu_task_avg=0.000155 mcu_task_stddev=0.000360 bytes_write=5114 bytes_read=6023 bytes_retransmit=9 bytes_invalid=0 send_seq=249 receive_seq=249 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004465 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=3.08 cputime=6.194 memavail=710888 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=14.7 pwm=0.000
Stats 49.4: gcodein=0  mcu: mcu_awake=0.062 mcu_task_avg=0.000155 mcu_task_stddev=0.000360 bytes_write=5120 bytes_read=6129 bytes_retransmit=9 bytes_invalid=0 send_seq=250 receive_seq=250 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004433 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=3.08 cputime=6.228 memavail=708236 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=14.8 pwm=0.000
Stats 50.4: gcodein=0  mcu: mcu_awake=0.062 mcu_task_avg=0.000155 mcu_task_stddev=0.000360 bytes_write=5126 bytes_read=6265 bytes_retransmit=9 bytes_invalid=0 send_seq=251 receive_seq=251 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004474 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=2.99 cputime=6.259 memavail=709292 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=14.8 pwm=0.000
Stats 51.4: gcodein=0  mcu: mcu_awake=0.062 mcu_task_avg=0.000155 mcu_task_stddev=0.000360 bytes_write=5132 bytes_read=6371 bytes_retransmit=9 bytes_invalid=0 send_seq=252 receive_seq=252 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004340 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=2.99 cputime=6.286 memavail=708820 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=14.6 pwm=0.000
Stats 52.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000014 mcu_task_stddev=0.000035 bytes_write=5138 bytes_read=6491 bytes_retransmit=9 bytes_invalid=0 send_seq=253 receive_seq=253 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004298 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=2.99 cputime=6.313 memavail=709836 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=14.6 pwm=0.000
b'Got EOF when reading from device'
Stats 53.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000014 mcu_task_stddev=0.000035 bytes_write=5138 bytes_read=6506 bytes_retransmit=9 bytes_invalid=0 send_seq=253 receive_seq=253 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=1 freq=72004298 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=2.99 cputime=6.337 memavail=709280 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=14.6 pwm=0.000
Stats 54.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000014 mcu_task_stddev=0.000035 bytes_write=5138 bytes_read=6506 bytes_retransmit=9 bytes_invalid=0 send_seq=253 receive_seq=253 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=72004298 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=2.99 cputime=6.360 memavail=706660 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=14.6 pwm=0.000
Stats 55.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000014 mcu_task_stddev=0.000035 bytes_write=5138 bytes_read=6506 bytes_retransmit=9 bytes_invalid=0 send_seq=253 receive_seq=253 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=3 freq=72004298 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=2.83 cputime=6.387 memavail=699640 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=14.6 pwm=0.000
Stats 56.4: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000014 mcu_task_stddev=0.000035 bytes_write=5138 bytes_read=6506 bytes_retransmit=9 bytes_invalid=0 send_seq=253 receive_seq=253 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=4 freq=72004298 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=2.83 cputime=6.422 memavail=701992 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=14.6 pwm=0.000
Timeout with MCU 'mcu' (eventtime=57.361807)
Transition to shutdown state: Lost communication with MCU 'mcu'
Dumping gcode input 0 blocks
Dumping 20 requests for client 281473383899040
Received 46.462278: b'{"id": 281473165299040, "method": "info", "params": {}}'
Received 46.467897: b'{"id": 281473165299040, "method": "objects/subscribe", "params": {"objects": {"webhooks": null}, "response_template": {"method": "process_status_update"}}}'
Received 46.472987: b'{"id": 281473165299664, "method": "gcode/subscribe_output", "params": {"response_template": {"method": "process_gcode_response"}}}'
Received 46.477842: b'{"id": 281473165299040, "method": "list_endpoints", "params": {}}'
Received 46.487542: b'{"id": 281473165267200, "method": "objects/subscribe", "params": {"objects": {"webhooks": null, "print_stats": null}, "response_template": {"method": "process_status_update"}}}'
Received 46.792201: b'{"id": 281473165269168, "method": "objects/list", "params": {}}'
Received 46.796936: b'{"id": 281473165269168, "method": "objects/query", "params": {"objects": {"configfile": null}}}'
Received 46.982343: b'{"id": 281473165269648, "method": "register_remote_method", "params": {"response_template": {"method": "shutdown_machine"}, "remote_method": "shutdown_machine"}}'
Received 46.987100: b'{"id": 281473175478624, "method": "register_remote_method", "params": {"response_template": {"method": "reboot_machine"}, "remote_method": "reboot_machine"}}'
Received 46.991245: b'{"id": 281473175478624, "method": "register_remote_method", "params": {"response_template": {"method": "pause_job_queue"}, "remote_method": "pause_job_queue"}}'
Received 46.995417: b'{"id": 281473175478624, "method": "register_remote_method", "params": {"response_template": {"method": "start_job_queue"}, "remote_method": "start_job_queue"}}'
Received 47.006808: b'{"id": 281473165281456, "method": "objects/query", "params": {"objects": {"heaters": null}}}'
Received 47.007686: b'{"id": 281473165283184, "method": "objects/query", "params": {"objects": {"heaters": null}}}'
Received 47.101441: b'{"id": 281473165326464, "method": "info", "params": {}}'
Received 47.130499: b'{"id": 281473165327328, "method": "objects/query", "params": {"objects": {"configfile": null}}}'
Received 47.227794: b'{"id": 281473165326128, "method": "objects/subscribe", "params": {"objects": {"webhooks": null, "print_stats": null, "heater_bed": null, "extruder": null}, "response_template": {"method": "process_status_update"}}}'
Received 47.282408: b'{"id": 281473165325888, "method": "gcode/help", "params": {}}'
Received 47.322142: b'{"id": 281473165324880, "method": "objects/query", "params": {"objects": {"bed_mesh": null, "configfile": null, "display_status": null, "extruder": null, "fan": null, "gcode_move": null, "heater_bed": null, "idle_timeout": null, "pause_resume": null, "print_stats": null, "toolhead": null, "virtual_sdcard": null, "webhooks": null, "motion_report": null, "firmware_retraction": null, "exclude_object": null, "manual_probe": null}}}'
Received 47.488730: b'{"id": 281473165268688, "method": "objects/subscribe", "params": {"objects": {"webhooks": null, "print_stats": null, "heater_bed": null, "extruder": null}, "response_template": {"method": "process_status_update"}}}'
Received 47.730213: b'{"id": 281473165267104, "method": "objects/subscribe", "params": {"objects": {"bed_mesh": ["profile_name", "mesh_max", "mesh_min", "probed_matrix", "profiles"], "configfile": ["config"], "display_status": ["progress", "message"], "fan": ["speed"], "gcode_move": ["extrude_factor", "gcode_position", "homing_origin", "speed_factor", "speed"], "idle_timeout": ["state"], "pause_resume": ["is_paused"], "print_stats": null, "toolhead": ["homed_axes", "estimated_print_time", "print_time", "position", "extruder", "max_accel", "max_accel_to_decel", "max_velocity", "square_corner_velocity"], "virtual_sdcard": ["file_position", "is_active", "progress"], "webhooks": null, "firmware_retraction": ["retract_length", "retract_speed", "unretract_extra_length", "unretract_speed"], "motion_report": ["live_position", "live_velocity", "live_extruder_velocity"], "exclude_object": ["current_object", "objects", "excluded_objects"], "manual_probe": ["is_active"], "extruder": null, "heater_bed": null}, "response_template": {"method": "process_status_update"}}}'
gcode state: absolute_coord=True absolute_extrude=True base_position=[0.0, 0.0, 0.0, 0.0] last_position=[0.0, 0.0, 0.0, 0.0] homing_position=[0.0, 0.0, 0.0, 0.0] speed_factor=0.016666666666666666 extrude_factor=1.0 speed=25.0
Reactor garbage collection: (46.86582423, 0.0, 0.0)
Unable to issue reset command on MCU 'mcu'
webhooks client 281473383899040: Disconnected
Restarting printer
Start printer at Thu Nov 23 15:42:12 2023 (1700754133.0 82.4)
===== Config file =====
[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[mcu]
serial = /dev/serial/by-path/platform-5200000.usb-usb-0:1.3:1.0-port0
restart_method = command

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100

[stepper_x]
step_pin = PC2
dir_pin = !PB9
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_x:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_x]
uart_pin = PC1
run_current = 0.860
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 81
diag_pin = PA5

[stepper_y]
step_pin = PB8
dir_pin = PB7
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_y:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_y]
uart_pin = PC0
run_current = 0.900
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 82
diag_pin = PA6

[stepper_z]
step_pin = PB6
dir_pin = !PB5
enable_pin = !PC3
microsteps = 16
rotation_distance = 4
endstop_pin = probe:z_virtual_endstop
position_min = -4
position_max = 261
homing_speed = 4

[tmc2209 stepper_z]
uart_pin = PA15
run_current = 1.000
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
diag_pin = PA7

[extruder]
max_extrude_only_distance = 100.0
step_pin = PB4
dir_pin = !PB3
enable_pin = !PC3
microsteps = 16
rotation_distance = 4.56
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PA1
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC5
min_temp = 0
max_temp = 300
control = pid
pid_kp = 23.940
pid_ki = 1.629
pid_kd = 87.981

[tmc2209 extruder]
uart_pin = PC14
run_current = 0.550
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3

[heater_bed]
heater_pin = PA2
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 69.445
pid_ki = 1.146
pid_kd = 1052.087

[fan]
pin = PA0

[probe]
pin = PB1
x_offset = 28
y_offset = -20
samples = 2
samples_tolerance = 0.015
samples_tolerance_retries = 5
z_offset = -0.230

[safe_z_home]
home_xy_position = 85,135
z_hop = 10
z_hop_speed = 5

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 28, 20
mesh_max = 210, 205
probe_count = 10
algorithm = bicubic
fade_start = 1
fade_end = 10
fade_target = 0

[display]
lcd_type = st7920
cs_pin = PB12
sclk_pin = PB13
sid_pin = PB15
encoder_pins = ^PB14, ^PB10
click_pin = ^!PB2

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[exclude_object]

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set probe_dock_enable = kamp_settings.probe_dock_enable | abs %}
	{% set attach_macro = kamp_settings.attach_macro | string %}
	{% set detach_macro = kamp_settings.detach_macro | string %}
	{% set mesh_margin = kamp_settings.mesh_margin | float %}
	{% set fuzz_amount = kamp_settings.fuzz_amount | float %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% set fuzz_range = range((0) | int, (fuzz_amount * 100) | int + 1) %}
	{% set adapted_x_min = x_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_y_min = y_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_x_max = x_max + mesh_margin + (fuzz_range | random / 100.0) %}
	{% set adapted_y_max = y_max + mesh_margin + (fuzz_range | random / 100.0) %}
	
	{% set adapted_x_min = [adapted_x_min , bed_mesh_min[0]] | max %}
	{% set adapted_y_min = [adapted_y_min , bed_mesh_min[1]] | max %}
	{% set adapted_x_max = [adapted_x_max , bed_mesh_max[0]] | min %}
	{% set adapted_y_max = [adapted_y_max , bed_mesh_max[1]] | min %}
	
	{% set points_x = (((adapted_x_max - adapted_x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((adapted_y_max - adapted_y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	
	{% set points_x = [points_x , min_points]|max %}
	{% set points_y = [points_y , min_points]|max %}
	{% set points_x = [points_x , probe_count[0]]|min %}
	{% set points_y = [points_y , probe_count[1]]|min %}
	
	{% if verbose_enable == True %}
	{% if printer.exclude_object.objects != [] %}
	
	{ action_respond_info( "Algorithm: {}.".format(
	(algorithm),
	)) }
	
	{ action_respond_info("Default probe count: {},{}.".format(
	(probe_count[0]),
	(probe_count[1]),
	)) }
	
	{ action_respond_info("Adapted probe count: {},{}.".format(
	(points_x),
	(points_y),
	)) }
	
	{action_respond_info("Default mesh bounds: {}, {}.".format(
	(bed_mesh_min[0],bed_mesh_min[1]),
	(bed_mesh_max[0],bed_mesh_max[1]),
	)) }
	
	{% if mesh_margin > 0 %}
	{action_respond_info("Mesh margin is {}, mesh bounds extended by {}mm.".format(
	(mesh_margin),
	(mesh_margin),
	)) }
	{% else %}
	{action_respond_info("Mesh margin is 0, margin not increased.")}
	{% endif %}
	
	{% if fuzz_amount > 0 %}
	{action_respond_info("Mesh point fuzzing enabled, points fuzzed up to {}mm.".format(
	(fuzz_amount),
	)) }
	{% else %}
	{action_respond_info("Fuzz amount is 0, mesh points not fuzzed.")}
	{% endif %}
	
	{ action_respond_info("Adapted mesh bounds: {}, {}.".format(
	(adapted_x_min, adapted_y_min),
	(adapted_x_max, adapted_y_max),
	)) }
	
	{action_respond_info("KAMP adjustments successful. Happy KAMPing!")}
	
	{% else %}
	
	{action_respond_info("No objects detected! Check your gcode and make sure that EXCLUDE_OBJECT_DEFINE is happening before BED_MESH_CALIBRATE is called. Defaulting to regular meshing.")}
	G4 P5000
	{% endif %}
	
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={adapted_x_min},{adapted_y_min} mesh_max={adapted_x_max},{adapted_y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}

[gcode_macro LINE_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set verbose_enable = printer["gcode_macro _KAMP_Settings"].verbose_enable | abs %}
	{% set purge_height = printer["gcode_macro _KAMP_Settings"].purge_height | float %}
	{% set tip_distance = printer["gcode_macro _KAMP_Settings"].tip_distance | float %}
	{% set purge_margin = printer["gcode_macro _KAMP_Settings"].purge_margin | float %}
	{% set purge_amount = printer["gcode_macro _KAMP_Settings"].purge_amount | float %}
	{% set flow_rate = printer["gcode_macro _KAMP_Settings"].flow_rate | float %}
	
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	{% if purge_y_origin > 0 %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_center),
	(purge_y_origin),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% else %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_origin),
	(purge_y_center),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	{% if purge_y_origin > 0 %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_center} Y{purge_y_origin}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 X{purge_x_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% else %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_origin} Y{purge_y_center}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 Y{purge_y_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 Y{purge_y_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% endif %}
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.8
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 10
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro update_git]
gcode = 
	RUN_SHELL_COMMAND CMD=update_git_script

[gcode_shell_command update_git_script]
command = bash /home/biqu/printer_data/klipper-backup/script.sh
timeout = 90.0
verbose = True
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473384309376: New connection
webhooks client 281473384309376: Client info {'program': 'Moonraker', 'version': 'v0.8.0-202-gdddd968'}
mcu 'mcu': got {'oid': 20, 'next_clock': 2213832704, 'value': 31826, '#name': 'analog_in_state', '#sent_time': 86.593246499, '#receive_time': 86.613952082}
mcu 'mcu': got {'oid': 15, 'next_clock': 2231832704, 'value': 31865, '#name': 'analog_in_state', '#sent_time': 86.83445787400001, '#receive_time': 86.86397303999999}
mcu 'mcu': got {'oid': 20, 'next_clock': 2235432704, 'value': 31818, '#name': 'analog_in_state', '#sent_time': 86.889636624, '#receive_time': 86.91402645699999}
mcu 'mcu': got {'count': 172, 'sum': 203927, 'sumsq': 1254057, '#name': 'stats', '#sent_time': 87.05621237400001, '#receive_time': 87.05929799900001}
Loaded MCU 'mcu' 112 commands (v0.12.0-0-g0d67d9c4 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA10,PA9 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
MCU error during connect
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 180, in _connect
    cb()
  File "/home/biqu/klipper/klippy/mcu.py", line 762, in _connect
    raise error("Failed automated reset of MCU '%s'"
mcu.error: Failed automated reset of MCU 'mcu'
No build file /home/biqu/klipper/klippy/../.config
No build file /home/biqu/klipper/klippy/../out/klipper.dict
No build file /home/biqu/klipper/klippy/../out/klipper.elf
mcu 'mcu': got {'oid': 15, 'next_clock': 2253432704, 'value': 31866, '#name': 'analog_in_state', '#sent_time': 87.06548754, '#receive_time': 87.163937249}
mcu 'mcu': got {'oid': 20, 'next_clock': 2257032704, 'value': 31821, '#name': 'analog_in_state', '#sent_time': 87.06548754, '#receive_time': 87.213957666}
mcu 'mcu': got {'oid': 15, 'next_clock': 2275032704, 'value': 31869, '#name': 'analog_in_state', '#sent_time': 87.06548754, '#receive_time': 87.464099916}
mcu 'mcu': got {'oid': 20, 'next_clock': 2278632704, 'value': 31828, '#name': 'analog_in_state', '#sent_time': 87.06548754, '#receive_time': 87.51409795699999}
mcu 'mcu': got {'oid': 15, 'next_clock': 2296632704, 'value': 31866, '#name': 'analog_in_state', '#sent_time': 87.06548754, '#receive_time': 87.764105249}
mcu 'mcu': got {'oid': 20, 'next_clock': 2300232704, 'value': 31823, '#name': 'analog_in_state', '#sent_time': 87.06548754, '#receive_time': 87.814001624}
mcu 'mcu': got {'oid': 15, 'next_clock': 2318232704, 'value': 31863, '#name': 'analog_in_state', '#sent_time': 88.049990249, '#receive_time': 88.063891583}
mcu 'mcu': got {'oid': 20, 'next_clock': 2321832704, 'value': 31823, '#name': 'analog_in_state', '#sent_time': 88.049990249, '#receive_time': 88.113918583}
mcu 'mcu': got {'oid': 15, 'next_clock': 2339832704, 'value': 31865, '#name': 'analog_in_state', '#sent_time': 88.049990249, '#receive_time': 88.36392858299999}
mcu 'mcu': got {'oid': 20, 'next_clock': 2343432704, 'value': 31828, '#name': 'analog_in_state', '#sent_time': 88.049990249, '#receive_time': 88.413912708}
Starting Klippy...
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-8-g187cc2f1-dirty'
Untracked files: klippy/extras/gcode_shell_command.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Wed Nov 22 17:17:15 2023 (1700673435.5 19.5)
===== Config file =====
[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[mcu]
serial = /dev/serial/by-path/platform-5200000.usb-usb-0:1.3:1.0-port0
restart_method = command

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100

[stepper_x]
step_pin = PC2
dir_pin = !PB9
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_x:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_x]
uart_pin = PC1
run_current = 0.860
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 81
diag_pin = PA5

[stepper_y]
step_pin = PB8
dir_pin = PB7
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_y:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_y]
uart_pin = PC0
run_current = 0.900
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 82
diag_pin = PA6

[stepper_z]
step_pin = PB6
dir_pin = !PB5
enable_pin = !PC3
microsteps = 16
rotation_distance = 4
endstop_pin = probe:z_virtual_endstop
position_min = -4
position_max = 261
homing_speed = 4

[tmc2209 stepper_z]
uart_pin = PA15
run_current = 1.000
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
diag_pin = PA7

[extruder]
max_extrude_only_distance = 100.0
step_pin = PB4
dir_pin = !PB3
enable_pin = !PC3
microsteps = 16
rotation_distance = 4.56
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PA1
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC5
min_temp = 0
max_temp = 300
control = pid
pid_kp = 23.940
pid_ki = 1.629
pid_kd = 87.981

[tmc2209 extruder]
uart_pin = PC14
run_current = 0.550
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3

[heater_bed]
heater_pin = PA2
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 69.445
pid_ki = 1.146
pid_kd = 1052.087

[fan]
pin = PA0

[probe]
pin = PB1
x_offset = 28
y_offset = -20
samples = 2
samples_tolerance = 0.015
samples_tolerance_retries = 5
z_offset = -0.230

[safe_z_home]
home_xy_position = 85,135
z_hop = 10
z_hop_speed = 5

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 28, 20
mesh_max = 210, 205
probe_count = 10
algorithm = bicubic
fade_start = 1
fade_end = 10
fade_target = 0

[display]
lcd_type = st7920
cs_pin = PB12
sclk_pin = PB13
sid_pin = PB15
encoder_pins = ^PB14, ^PB10
click_pin = ^!PB2

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[exclude_object]

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set probe_dock_enable = kamp_settings.probe_dock_enable | abs %}
	{% set attach_macro = kamp_settings.attach_macro | string %}
	{% set detach_macro = kamp_settings.detach_macro | string %}
	{% set mesh_margin = kamp_settings.mesh_margin | float %}
	{% set fuzz_amount = kamp_settings.fuzz_amount | float %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% set fuzz_range = range((0) | int, (fuzz_amount * 100) | int + 1) %}
	{% set adapted_x_min = x_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_y_min = y_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_x_max = x_max + mesh_margin + (fuzz_range | random / 100.0) %}
	{% set adapted_y_max = y_max + mesh_margin + (fuzz_range | random / 100.0) %}
	
	{% set adapted_x_min = [adapted_x_min , bed_mesh_min[0]] | max %}
	{% set adapted_y_min = [adapted_y_min , bed_mesh_min[1]] | max %}
	{% set adapted_x_max = [adapted_x_max , bed_mesh_max[0]] | min %}
	{% set adapted_y_max = [adapted_y_max , bed_mesh_max[1]] | min %}
	
	{% set points_x = (((adapted_x_max - adapted_x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((adapted_y_max - adapted_y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	
	{% set points_x = [points_x , min_points]|max %}
	{% set points_y = [points_y , min_points]|max %}
	{% set points_x = [points_x , probe_count[0]]|min %}
	{% set points_y = [points_y , probe_count[1]]|min %}
	
	{% if verbose_enable == True %}
	{% if printer.exclude_object.objects != [] %}
	
	{ action_respond_info( "Algorithm: {}.".format(
	(algorithm),
	)) }
	
	{ action_respond_info("Default probe count: {},{}.".format(
	(probe_count[0]),
	(probe_count[1]),
	)) }
	
	{ action_respond_info("Adapted probe count: {},{}.".format(
	(points_x),
	(points_y),
	)) }
	
	{action_respond_info("Default mesh bounds: {}, {}.".format(
	(bed_mesh_min[0],bed_mesh_min[1]),
	(bed_mesh_max[0],bed_mesh_max[1]),
	)) }
	
	{% if mesh_margin > 0 %}
	{action_respond_info("Mesh margin is {}, mesh bounds extended by {}mm.".format(
	(mesh_margin),
	(mesh_margin),
	)) }
	{% else %}
	{action_respond_info("Mesh margin is 0, margin not increased.")}
	{% endif %}
	
	{% if fuzz_amount > 0 %}
	{action_respond_info("Mesh point fuzzing enabled, points fuzzed up to {}mm.".format(
	(fuzz_amount),
	)) }
	{% else %}
	{action_respond_info("Fuzz amount is 0, mesh points not fuzzed.")}
	{% endif %}
	
	{ action_respond_info("Adapted mesh bounds: {}, {}.".format(
	(adapted_x_min, adapted_y_min),
	(adapted_x_max, adapted_y_max),
	)) }
	
	{action_respond_info("KAMP adjustments successful. Happy KAMPing!")}
	
	{% else %}
	
	{action_respond_info("No objects detected! Check your gcode and make sure that EXCLUDE_OBJECT_DEFINE is happening before BED_MESH_CALIBRATE is called. Defaulting to regular meshing.")}
	G4 P5000
	{% endif %}
	
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={adapted_x_min},{adapted_y_min} mesh_max={adapted_x_max},{adapted_y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}

[gcode_macro LINE_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set verbose_enable = printer["gcode_macro _KAMP_Settings"].verbose_enable | abs %}
	{% set purge_height = printer["gcode_macro _KAMP_Settings"].purge_height | float %}
	{% set tip_distance = printer["gcode_macro _KAMP_Settings"].tip_distance | float %}
	{% set purge_margin = printer["gcode_macro _KAMP_Settings"].purge_margin | float %}
	{% set purge_amount = printer["gcode_macro _KAMP_Settings"].purge_amount | float %}
	{% set flow_rate = printer["gcode_macro _KAMP_Settings"].flow_rate | float %}
	
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	{% if purge_y_origin > 0 %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_center),
	(purge_y_origin),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% else %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_origin),
	(purge_y_center),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	{% if purge_y_origin > 0 %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_center} Y{purge_y_origin}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 X{purge_x_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% else %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_origin} Y{purge_y_center}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 Y{purge_y_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 Y{purge_y_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% endif %}
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.8
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 10
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro update_git]
gcode = 
	RUN_SHELL_COMMAND CMD=update_git_script

[gcode_shell_command update_git_script]
command = bash /home/biqu/printer_data/klipper-backup/script.sh
timeout = 90.0
verbose = True
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473519560448: New connection
mcu 'mcu': got {'oid': 15, 'next_clock': 1068865408, 'value': 31867, '#name': 'analog_in_state', '#sent_time': 28.546746304000003, '#receive_time': 28.598583013000002}
mcu 'mcu': got {'oid': 20, 'next_clock': 1072465408, 'value': 31820, '#name': 'analog_in_state', '#sent_time': 28.608049596, '#receive_time': 28.648571596}
webhooks client 281473519560448: Client info {'program': 'Moonraker', 'version': 'v0.8.0-202-gdddd968'}
Loaded MCU 'mcu' 112 commands (v0.12.0-0-g0d67d9c4 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA10,PA9 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Enabling TMC virtual enable for 'stepper_x'
Enabling TMC virtual enable for 'stepper_y'
Enabling TMC virtual enable for 'stepper_z'
Enabling TMC virtual enable for 'extruder'
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (0.0, 40.0)     | (28.0, 20.0)
  1   | (20.2, 40.0)    | (48.2, 20.0)
  2   | (40.4, 40.0)    | (68.4, 20.0)
  3   | (60.7, 40.0)    | (88.7, 20.0)
  4   | (80.9, 40.0)    | (108.9, 20.0)
  5   | (101.1, 40.0)   | (129.1, 20.0)
  6   | (121.3, 40.0)   | (149.3, 20.0)
  7   | (141.5, 40.0)   | (169.5, 20.0)
  8   | (161.8, 40.0)   | (189.8, 20.0)
  9   | (182.0, 40.0)   | (210.0, 20.0)
  10  | (182.0, 60.5)   | (210.0, 40.5)
  11  | (161.8, 60.5)   | (189.8, 40.5)
  12  | (141.5, 60.5)   | (169.5, 40.5)
  13  | (121.3, 60.5)   | (149.3, 40.5)
  14  | (101.1, 60.5)   | (129.1, 40.5)
  15  | (80.9, 60.5)    | (108.9, 40.5)
  16  | (60.7, 60.5)    | (88.7, 40.5)
  17  | (40.4, 60.5)    | (68.4, 40.5)
  18  | (20.2, 60.5)    | (48.2, 40.5)
  19  | (0.0, 60.5)     | (28.0, 40.5)
  20  | (0.0, 81.1)     | (28.0, 61.1)
  21  | (20.2, 81.1)    | (48.2, 61.1)
  22  | (40.4, 81.1)    | (68.4, 61.1)
  23  | (60.7, 81.1)    | (88.7, 61.1)
  24  | (80.9, 81.1)    | (108.9, 61.1)
  25  | (101.1, 81.1)   | (129.1, 61.1)
  26  | (121.3, 81.1)   | (149.3, 61.1)
  27  | (141.5, 81.1)   | (169.5, 61.1)
  28  | (161.8, 81.1)   | (189.8, 61.1)
  29  | (182.0, 81.1)   | (210.0, 61.1)
  30  | (182.0, 101.6)  | (210.0, 81.6)
  31  | (161.8, 101.6)  | (189.8, 81.6)
  32  | (141.5, 101.6)  | (169.5, 81.6)
  33  | (121.3, 101.6)  | (149.3, 81.6)
  34  | (101.1, 101.6)  | (129.1, 81.6)
  35  | (80.9, 101.6)   | (108.9, 81.6)
  36  | (60.7, 101.6)   | (88.7, 81.6)
  37  | (40.4, 101.6)   | (68.4, 81.6)
  38  | (20.2, 101.6)   | (48.2, 81.6)
  39  | (0.0, 101.6)    | (28.0, 81.6)
  40  | (0.0, 122.2)    | (28.0, 102.2)
  41  | (20.2, 122.2)   | (48.2, 102.2)
  42  | (40.4, 122.2)   | (68.4, 102.2)
  43  | (60.7, 122.2)   | (88.7, 102.2)
  44  | (80.9, 122.2)   | (108.9, 102.2)
  45  | (101.1, 122.2)  | (129.1, 102.2)
  46  | (121.3, 122.2)  | (149.3, 102.2)
  47  | (141.5, 122.2)  | (169.5, 102.2)
  48  | (161.8, 122.2)  | (189.8, 102.2)
  49  | (182.0, 122.2)  | (210.0, 102.2)
  50  | (182.0, 142.8)  | (210.0, 122.7)
  51  | (161.8, 142.8)  | (189.8, 122.7)
  52  | (141.5, 142.8)  | (169.5, 122.7)
  53  | (121.3, 142.8)  | (149.3, 122.7)
  54  | (101.1, 142.8)  | (129.1, 122.7)
  55  | (80.9, 142.8)   | (108.9, 122.7)
  56  | (60.7, 142.8)   | (88.7, 122.7)
  57  | (40.4, 142.8)   | (68.4, 122.7)
  58  | (20.2, 142.8)   | (48.2, 122.7)
  59  | (0.0, 142.8)    | (28.0, 122.7)
  60  | (0.0, 163.3)    | (28.0, 143.3)
  61  | (20.2, 163.3)   | (48.2, 143.3)
  62  | (40.4, 163.3)   | (68.4, 143.3)
  63  | (60.7, 163.3)   | (88.7, 143.3)
  64  | (80.9, 163.3)   | (108.9, 143.3)
  65  | (101.1, 163.3)  | (129.1, 143.3)
  66  | (121.3, 163.3)  | (149.3, 143.3)
  67  | (141.5, 163.3)  | (169.5, 143.3)
  68  | (161.8, 163.3)  | (189.8, 143.3)
  69  | (182.0, 163.3)  | (210.0, 143.3)
  70  | (182.0, 183.8)  | (210.0, 163.8)
  71  | (161.8, 183.8)  | (189.8, 163.8)
  72  | (141.5, 183.8)  | (169.5, 163.8)
  73  | (121.3, 183.8)  | (149.3, 163.8)
  74  | (101.1, 183.8)  | (129.1, 163.8)
  75  | (80.9, 183.8)   | (108.9, 163.8)
  76  | (60.7, 183.8)   | (88.7, 163.8)
  77  | (40.4, 183.8)   | (68.4, 163.8)
  78  | (20.2, 183.8)   | (48.2, 163.8)
  79  | (0.0, 183.8)    | (28.0, 163.8)
  80  | (0.0, 204.4)    | (28.0, 184.4)
  81  | (20.2, 204.4)   | (48.2, 184.4)
  82  | (40.4, 204.4)   | (68.4, 184.4)
  83  | (60.7, 204.4)   | (88.7, 184.4)
  84  | (80.9, 204.4)   | (108.9, 184.4)
  85  | (101.1, 204.4)  | (129.1, 184.4)
  86  | (121.3, 204.4)  | (149.3, 184.4)
  87  | (141.5, 204.4)  | (169.5, 184.4)
  88  | (161.8, 204.4)  | (189.8, 184.4)
  89  | (182.0, 204.4)  | (210.0, 184.4)
  90  | (182.0, 225.0)  | (210.0, 205.0)
  91  | (161.8, 225.0)  | (189.8, 205.0)
  92  | (141.5, 225.0)  | (169.5, 205.0)
  93  | (121.3, 225.0)  | (149.3, 205.0)
  94  | (101.1, 225.0)  | (129.1, 205.0)
  95  | (80.9, 225.0)   | (108.9, 205.0)
  96  | (60.7, 225.0)   | (88.7, 205.0)
  97  | (40.4, 225.0)   | (68.4, 205.0)
  98  | (20.2, 225.0)   | (48.2, 205.0)
  99  | (0.0, 225.0)    | (28.0, 205.0)
Starting heater checks for extruder
webhooks: registering remote method 'shutdown_machine' for connection id: 281473519560448
webhooks: registering remote method 'reboot_machine' for connection id: 281473519560448
webhooks: registering remote method 'pause_job_queue' for connection id: 281473519560448
webhooks: registering remote method 'start_job_queue' for connection id: 281473519560448
Smart Park location: 112.5,112.5.
Must home axis first: 0.000 0.000 10.000 [0.000]
Must home axis first: 0.000 0.000 10.000 [0.000]
TMC 'stepper_z' reports GSTAT:      00000001 reset=1(Reset)
TMC 'stepper_z' reports GSTAT:      00000000
Stats 477.0: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000007 bytes_write=8943 bytes_read=59613 bytes_retransmit=9 bytes_invalid=0 send_seq=776 receive_seq=775 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=7 upcoming_bytes=0 freq=72004304 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.50 cputime=22.318 memavail=705204 print_time=583.978 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 478.0: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000019 mcu_task_stddev=0.000044 bytes_write=8989 bytes_read=59790 bytes_retransmit=9 bytes_invalid=0 send_seq=780 receive_seq=780 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004304 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.50 cputime=22.355 memavail=704892 print_time=583.978 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
TMC 'stepper_x' reports GSTAT:      00000001 reset=1(Reset)
TMC 'stepper_x' reports GSTAT:      00000000
Stats 479.0: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000019 mcu_task_stddev=0.000044 bytes_write=9599 bytes_read=60522 bytes_retransmit=9 bytes_invalid=0 send_seq=819 receive_seq=819 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004303 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.50 cputime=22.463 memavail=703960 print_time=584.478 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.4 pwm=0.000
Stats 480.0: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000019 mcu_task_stddev=0.000044 bytes_write=10041 bytes_read=61010 bytes_retransmit=9 bytes_invalid=0 send_seq=854 receive_seq=854 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004304 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.50 cputime=22.529 memavail=703960 print_time=585.478 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 481.0: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000019 mcu_task_stddev=0.000044 bytes_write=10689 bytes_read=61761 bytes_retransmit=9 bytes_invalid=0 send_seq=901 receive_seq=901 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=72004305 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.46 cputime=22.658 memavail=702700 print_time=586.517 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
TMC 'stepper_y' reports GSTAT:      00000001 reset=1(Reset)
TMC 'stepper_y' reports GSTAT:      00000000
Stats 482.0: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000019 mcu_task_stddev=0.000044 bytes_write=11515 bytes_read=62660 bytes_retransmit=9 bytes_invalid=0 send_seq=955 receive_seq=955 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004302 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.46 cputime=22.806 memavail=703916 print_time=587.467 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.4 pwm=0.000
Stats 483.0: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=11985 bytes_read=63209 bytes_retransmit=9 bytes_invalid=0 send_seq=992 receive_seq=992 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004301 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.46 cputime=22.872 memavail=703664 print_time=588.467 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 484.0: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=12464 bytes_read=63743 bytes_retransmit=9 bytes_invalid=0 send_seq=1029 receive_seq=1029 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004299 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.46 cputime=22.942 memavail=703664 print_time=589.467 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 485.0: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=13322 bytes_read=64435 bytes_retransmit=9 bytes_invalid=0 send_seq=1073 receive_seq=1072 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=19 upcoming_bytes=0 freq=72004301 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.46 cputime=23.042 memavail=703776 print_time=593.461 buffer_time=3.145 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 486.0: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=13436 bytes_read=64689 bytes_retransmit=9 bytes_invalid=0 send_seq=1081 receive_seq=1081 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004301 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.42 cputime=23.091 memavail=703528 print_time=593.461 buffer_time=2.144 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 487.0: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=13549 bytes_read=64943 bytes_retransmit=9 bytes_invalid=0 send_seq=1090 receive_seq=1090 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004301 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.42 cputime=23.147 memavail=703028 print_time=593.462 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 488.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000019 mcu_task_stddev=0.000034 bytes_write=13656 bytes_read=65237 bytes_retransmit=9 bytes_invalid=0 send_seq=1098 receive_seq=1098 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004301 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.42 cputime=23.208 memavail=701536 print_time=593.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 489.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000019 mcu_task_stddev=0.000034 bytes_write=14168 bytes_read=65747 bytes_retransmit=9 bytes_invalid=0 send_seq=1134 receive_seq=1133 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=5 upcoming_bytes=0 freq=72004299 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.42 cputime=23.284 memavail=702360 print_time=594.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 490.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000019 mcu_task_stddev=0.000034 bytes_write=14667 bytes_read=66301 bytes_retransmit=9 bytes_invalid=0 send_seq=1174 receive_seq=1174 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004298 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.42 cputime=23.354 memavail=702640 print_time=595.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 491.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000019 mcu_task_stddev=0.000034 bytes_write=15117 bytes_read=66839 bytes_retransmit=9 bytes_invalid=0 send_seq=1209 receive_seq=1209 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004296 heater_bed: target=0 temp=14.1 pwm=0.000  sysload=0.39 cputime=23.424 memavail=702636 print_time=596.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 492.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000019 mcu_task_stddev=0.000034 bytes_write=15577 bytes_read=67356 bytes_retransmit=9 bytes_invalid=0 send_seq=1246 receive_seq=1246 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004295 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.39 cputime=23.492 memavail=702424 print_time=597.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 493.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000017 mcu_task_stddev=0.000009 bytes_write=16032 bytes_read=67883 bytes_retransmit=9 bytes_invalid=0 send_seq=1282 receive_seq=1282 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004295 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.39 cputime=23.564 memavail=702424 print_time=598.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 494.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000017 mcu_task_stddev=0.000009 bytes_write=16489 bytes_read=68425 bytes_retransmit=9 bytes_invalid=0 send_seq=1318 receive_seq=1318 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004297 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.39 cputime=23.653 memavail=699400 print_time=599.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 495.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000017 mcu_task_stddev=0.000009 bytes_write=16954 bytes_read=68954 bytes_retransmit=9 bytes_invalid=0 send_seq=1354 receive_seq=1354 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004298 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.39 cputime=23.722 memavail=700672 print_time=600.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 496.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000017 mcu_task_stddev=0.000009 bytes_write=17409 bytes_read=69473 bytes_retransmit=9 bytes_invalid=0 send_seq=1388 receive_seq=1388 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004296 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.35 cputime=23.789 memavail=701188 print_time=601.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 497.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000017 mcu_task_stddev=0.000009 bytes_write=17874 bytes_read=70032 bytes_retransmit=9 bytes_invalid=0 send_seq=1424 receive_seq=1424 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004296 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.35 cputime=23.857 memavail=701216 print_time=602.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 498.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=18324 bytes_read=70561 bytes_retransmit=9 bytes_invalid=0 send_seq=1457 receive_seq=1457 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004296 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.35 cputime=23.926 memavail=701472 print_time=603.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 499.0: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=18789 bytes_read=71090 bytes_retransmit=9 bytes_invalid=0 send_seq=1493 receive_seq=1493 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004297 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.35 cputime=23.995 memavail=701976 print_time=604.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 500.1: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=19254 bytes_read=71649 bytes_retransmit=9 bytes_invalid=0 send_seq=1529 receive_seq=1529 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004298 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.35 cputime=24.082 memavail=701576 print_time=605.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 501.1: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=19719 bytes_read=72178 bytes_retransmit=9 bytes_invalid=0 send_seq=1565 receive_seq=1565 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004296 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.41 cputime=24.157 memavail=701332 print_time=606.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 502.1: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=20184 bytes_read=72707 bytes_retransmit=9 bytes_invalid=0 send_seq=1601 receive_seq=1601 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004295 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.41 cputime=24.225 memavail=701080 print_time=607.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 503.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=20649 bytes_read=73281 bytes_retransmit=9 bytes_invalid=0 send_seq=1637 receive_seq=1637 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004294 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.41 cputime=24.297 memavail=701128 print_time=608.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 504.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=21114 bytes_read=73810 bytes_retransmit=9 bytes_invalid=0 send_seq=1673 receive_seq=1673 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004295 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.41 cputime=24.367 memavail=701128 print_time=609.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 505.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=21584 bytes_read=74344 bytes_retransmit=9 bytes_invalid=0 send_seq=1710 receive_seq=1710 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004293 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.41 cputime=24.436 memavail=701140 print_time=610.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 506.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=22049 bytes_read=74903 bytes_retransmit=9 bytes_invalid=0 send_seq=1746 receive_seq=1746 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004294 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.37 cputime=24.519 memavail=700132 print_time=611.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 507.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=22494 bytes_read=75412 bytes_retransmit=9 bytes_invalid=0 send_seq=1778 receive_seq=1778 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004296 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.37 cputime=24.599 memavail=701020 print_time=612.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 508.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=22954 bytes_read=75951 bytes_retransmit=9 bytes_invalid=0 send_seq=1813 receive_seq=1813 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004297 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.37 cputime=24.673 memavail=701528 print_time=613.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 509.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=23419 bytes_read=76510 bytes_retransmit=9 bytes_invalid=0 send_seq=1849 receive_seq=1849 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004297 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.37 cputime=24.741 memavail=702060 print_time=614.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 510.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=23889 bytes_read=77044 bytes_retransmit=9 bytes_invalid=0 send_seq=1886 receive_seq=1886 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004298 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.37 cputime=24.811 memavail=702100 print_time=615.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 511.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=24354 bytes_read=77573 bytes_retransmit=9 bytes_invalid=0 send_seq=1922 receive_seq=1922 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004297 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.34 cputime=24.877 memavail=702100 print_time=616.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 512.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=24819 bytes_read=78132 bytes_retransmit=9 bytes_invalid=0 send_seq=1958 receive_seq=1958 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004299 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.34 cputime=24.952 memavail=701848 print_time=617.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 513.1: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=25284 bytes_read=78676 bytes_retransmit=9 bytes_invalid=0 send_seq=1994 receive_seq=1994 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004299 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=0.34 cputime=25.032 memavail=702104 print_time=618.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 514.1: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=25754 bytes_read=79225 bytes_retransmit=9 bytes_invalid=0 send_seq=2031 receive_seq=2031 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004299 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.34 cputime=25.098 memavail=702056 print_time=619.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 515.1: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=26219 bytes_read=79769 bytes_retransmit=9 bytes_invalid=0 send_seq=2067 receive_seq=2067 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004298 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.34 cputime=25.167 memavail=701896 print_time=620.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.4 pwm=0.000
Stats 516.1: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=26684 bytes_read=80298 bytes_retransmit=9 bytes_invalid=0 send_seq=2103 receive_seq=2103 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004299 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=0.32 cputime=25.235 memavail=702400 print_time=621.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 517.1: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=27154 bytes_read=80847 bytes_retransmit=9 bytes_invalid=0 send_seq=2140 receive_seq=2140 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004298 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.32 cputime=25.301 memavail=702400 print_time=622.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 518.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=27631 bytes_read=81425 bytes_retransmit=9 bytes_invalid=0 send_seq=2177 receive_seq=2177 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004296 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.32 cputime=25.374 memavail=702400 print_time=623.512 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 519.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=28102 bytes_read=81849 bytes_retransmit=9 bytes_invalid=0 send_seq=2203 receive_seq=2202 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=5 upcoming_bytes=0 freq=72004298 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.32 cputime=25.460 memavail=702856 print_time=625.123 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 520.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=28389 bytes_read=82215 bytes_retransmit=9 bytes_invalid=0 send_seq=2223 receive_seq=2222 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=5 upcoming_bytes=0 freq=72004298 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=0.32 cputime=25.520 memavail=702472 print_time=625.523 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 521.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=28849 bytes_read=82774 bytes_retransmit=9 bytes_invalid=0 send_seq=2261 receive_seq=2261 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004301 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.37 cputime=25.588 memavail=702248 print_time=626.523 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 522.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000016 mcu_task_stddev=0.000006 bytes_write=29299 bytes_read=83308 bytes_retransmit=9 bytes_invalid=0 send_seq=2298 receive_seq=2298 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004302 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.37 cputime=25.657 memavail=702200 print_time=627.523 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 523.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=29767 bytes_read=83781 bytes_retransmit=9 bytes_invalid=0 send_seq=2324 receive_seq=2324 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004300 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.37 cputime=25.735 memavail=703288 print_time=630.088 buffer_time=1.717 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 524.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=29866 bytes_read=84040 bytes_retransmit=9 bytes_invalid=0 send_seq=2332 receive_seq=2331 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=5 upcoming_bytes=0 freq=72004301 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.37 cputime=25.783 memavail=703540 print_time=630.088 buffer_time=0.715 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 525.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=29966 bytes_read=84294 bytes_retransmit=9 bytes_invalid=0 send_seq=2340 receive_seq=2340 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004302 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.37 cputime=25.841 memavail=703056 print_time=630.088 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 526.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=30098 bytes_read=84563 bytes_retransmit=9 bytes_invalid=0 send_seq=2349 receive_seq=2349 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004303 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=0.50 cputime=25.894 memavail=704572 print_time=630.088 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Smart Park location: 112.5,112.5.
Stats 527.1: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000018 mcu_task_stddev=0.000016 bytes_write=30649 bytes_read=84878 bytes_retransmit=9 bytes_invalid=0 send_seq=2365 receive_seq=2365 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004304 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.50 cputime=25.954 memavail=704600 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 528.1: gcodein=0  mcu: mcu_awake=0.004 mcu_task_avg=0.000025 mcu_task_stddev=0.000063 bytes_write=30772 bytes_read=85147 bytes_retransmit=9 bytes_invalid=0 send_seq=2374 receive_seq=2374 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004305 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.50 cputime=26.004 memavail=704100 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 529.1: gcodein=0  mcu: mcu_awake=0.004 mcu_task_avg=0.000025 mcu_task_stddev=0.000063 bytes_write=30862 bytes_read=85406 bytes_retransmit=9 bytes_invalid=0 send_seq=2381 receive_seq=2381 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004306 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.50 cputime=26.051 memavail=704100 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 530.1: gcodein=0  mcu: mcu_awake=0.004 mcu_task_avg=0.000025 mcu_task_stddev=0.000063 bytes_write=30952 bytes_read=85665 bytes_retransmit=9 bytes_invalid=0 send_seq=2388 receive_seq=2388 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004306 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.50 cputime=26.100 memavail=704128 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 531.1: gcodein=0  mcu: mcu_awake=0.004 mcu_task_avg=0.000025 mcu_task_stddev=0.000063 bytes_write=31042 bytes_read=85909 bytes_retransmit=9 bytes_invalid=0 send_seq=2395 receive_seq=2395 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004307 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.46 cputime=26.155 memavail=703132 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 532.1: gcodein=0  mcu: mcu_awake=0.004 mcu_task_avg=0.000025 mcu_task_stddev=0.000063 bytes_write=31132 bytes_read=86168 bytes_retransmit=9 bytes_invalid=0 send_seq=2402 receive_seq=2402 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004308 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.46 cputime=26.205 memavail=701896 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 533.1: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000040 bytes_write=31222 bytes_read=86442 bytes_retransmit=9 bytes_invalid=0 send_seq=2409 receive_seq=2409 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004307 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.46 cputime=26.253 memavail=702152 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 534.1: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000040 bytes_write=31312 bytes_read=86686 bytes_retransmit=9 bytes_invalid=0 send_seq=2416 receive_seq=2416 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004308 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.46 cputime=26.301 memavail=702244 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 535.1: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000040 bytes_write=31402 bytes_read=86945 bytes_retransmit=9 bytes_invalid=0 send_seq=2423 receive_seq=2423 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004308 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.46 cputime=26.349 memavail=703000 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 536.1: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000040 bytes_write=31492 bytes_read=87204 bytes_retransmit=9 bytes_invalid=0 send_seq=2430 receive_seq=2430 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004309 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.42 cputime=26.396 memavail=703776 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 537.1: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000040 bytes_write=31582 bytes_read=87448 bytes_retransmit=9 bytes_invalid=0 send_seq=2437 receive_seq=2437 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004309 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.42 cputime=26.448 memavail=702720 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 538.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000014 mcu_task_stddev=0.000007 bytes_write=31672 bytes_read=87721 bytes_retransmit=9 bytes_invalid=0 send_seq=2444 receive_seq=2444 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004309 heater_bed: target=0 temp=14.2 pwm=0.000  sysload=0.42 cputime=26.504 memavail=703404 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 539.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000014 mcu_task_stddev=0.000007 bytes_write=31762 bytes_read=87980 bytes_retransmit=9 bytes_invalid=0 send_seq=2451 receive_seq=2451 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004309 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.42 cputime=26.552 memavail=703380 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 540.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000014 mcu_task_stddev=0.000007 bytes_write=31852 bytes_read=88224 bytes_retransmit=9 bytes_invalid=0 send_seq=2458 receive_seq=2458 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004311 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=0.42 cputime=26.598 memavail=703720 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 541.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000014 mcu_task_stddev=0.000007 bytes_write=31942 bytes_read=88483 bytes_retransmit=9 bytes_invalid=0 send_seq=2465 receive_seq=2465 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004310 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.63 cputime=26.645 memavail=703752 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 542.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000014 mcu_task_stddev=0.000007 bytes_write=32032 bytes_read=88742 bytes_retransmit=9 bytes_invalid=0 send_seq=2472 receive_seq=2472 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004310 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.63 cputime=26.692 memavail=703264 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 543.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=32122 bytes_read=89000 bytes_retransmit=9 bytes_invalid=0 send_seq=2479 receive_seq=2479 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004310 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.63 cputime=26.744 memavail=703516 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 544.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=32212 bytes_read=89259 bytes_retransmit=9 bytes_invalid=0 send_seq=2486 receive_seq=2486 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004310 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.63 cputime=26.801 memavail=701136 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 545.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=32302 bytes_read=89518 bytes_retransmit=9 bytes_invalid=0 send_seq=2493 receive_seq=2493 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004308 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=0.63 cputime=26.847 memavail=701416 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 546.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=32392 bytes_read=89762 bytes_retransmit=9 bytes_invalid=0 send_seq=2500 receive_seq=2500 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004308 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.58 cputime=26.895 memavail=701668 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 547.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=32482 bytes_read=90036 bytes_retransmit=9 bytes_invalid=0 send_seq=2507 receive_seq=2507 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004308 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.58 cputime=26.944 memavail=701928 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 548.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=32572 bytes_read=90294 bytes_retransmit=9 bytes_invalid=0 send_seq=2514 receive_seq=2514 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004309 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.58 cputime=26.990 memavail=701676 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 549.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=32662 bytes_read=90538 bytes_retransmit=9 bytes_invalid=0 send_seq=2521 receive_seq=2521 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004310 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.58 cputime=27.038 memavail=702432 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 550.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=32752 bytes_read=90808 bytes_retransmit=9 bytes_invalid=0 send_seq=2528 receive_seq=2528 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004310 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.58 cputime=27.096 memavail=701644 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.4 pwm=0.000
Stats 551.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=32842 bytes_read=91045 bytes_retransmit=9 bytes_invalid=0 send_seq=2535 receive_seq=2535 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004309 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.53 cputime=27.144 memavail=702224 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 552.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=32932 bytes_read=91282 bytes_retransmit=9 bytes_invalid=0 send_seq=2542 receive_seq=2542 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004308 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.53 cputime=27.190 memavail=702548 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 553.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=33022 bytes_read=91561 bytes_retransmit=9 bytes_invalid=0 send_seq=2549 receive_seq=2549 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004307 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.53 cputime=27.238 memavail=702496 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.3 pwm=0.000
Stats 554.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=33112 bytes_read=91803 bytes_retransmit=9 bytes_invalid=0 send_seq=2556 receive_seq=2556 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004307 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.53 cputime=27.285 memavail=702296 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 555.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=33202 bytes_read=92047 bytes_retransmit=9 bytes_invalid=0 send_seq=2563 receive_seq=2563 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004307 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.53 cputime=27.332 memavail=702296 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 556.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=33292 bytes_read=92321 bytes_retransmit=9 bytes_invalid=0 send_seq=2570 receive_seq=2570 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004311 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.49 cputime=27.391 memavail=700788 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 557.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=33382 bytes_read=92565 bytes_retransmit=9 bytes_invalid=0 send_seq=2577 receive_seq=2577 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004311 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.49 cputime=27.440 memavail=700828 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 558.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=33472 bytes_read=92823 bytes_retransmit=9 bytes_invalid=0 send_seq=2584 receive_seq=2584 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004310 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.49 cputime=27.487 memavail=700524 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 559.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=33562 bytes_read=93097 bytes_retransmit=9 bytes_invalid=0 send_seq=2591 receive_seq=2591 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004311 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.49 cputime=27.534 memavail=700576 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 560.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=33652 bytes_read=93341 bytes_retransmit=9 bytes_invalid=0 send_seq=2598 receive_seq=2598 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004311 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.49 cputime=27.580 memavail=701168 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 561.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=33742 bytes_read=93585 bytes_retransmit=9 bytes_invalid=0 send_seq=2605 receive_seq=2605 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004310 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.45 cputime=27.627 memavail=701420 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 562.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=33832 bytes_read=93859 bytes_retransmit=9 bytes_invalid=0 send_seq=2612 receive_seq=2612 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004310 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.45 cputime=27.681 memavail=700928 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 563.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=33922 bytes_read=94117 bytes_retransmit=9 bytes_invalid=0 send_seq=2619 receive_seq=2619 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004311 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.45 cputime=27.737 memavail=701588 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 564.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=34012 bytes_read=94361 bytes_retransmit=9 bytes_invalid=0 send_seq=2626 receive_seq=2626 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004310 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.45 cputime=27.783 memavail=701840 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 565.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=34102 bytes_read=94635 bytes_retransmit=9 bytes_invalid=0 send_seq=2633 receive_seq=2633 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004309 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=0.45 cputime=27.831 memavail=702092 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 566.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=34192 bytes_read=94879 bytes_retransmit=9 bytes_invalid=0 send_seq=2640 receive_seq=2640 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004308 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.41 cputime=27.878 memavail=701844 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 567.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=34282 bytes_read=95123 bytes_retransmit=9 bytes_invalid=0 send_seq=2647 receive_seq=2647 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004308 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.41 cputime=27.924 memavail=702868 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 568.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=34372 bytes_read=95411 bytes_retransmit=9 bytes_invalid=0 send_seq=2654 receive_seq=2654 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004308 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.41 cputime=27.974 memavail=701612 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 569.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=34462 bytes_read=95655 bytes_retransmit=9 bytes_invalid=0 send_seq=2661 receive_seq=2661 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004308 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.41 cputime=28.031 memavail=701108 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 570.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=34552 bytes_read=95899 bytes_retransmit=9 bytes_invalid=0 send_seq=2668 receive_seq=2668 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004307 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.41 cputime=28.077 memavail=701416 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 571.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=34642 bytes_read=96173 bytes_retransmit=9 bytes_invalid=0 send_seq=2675 receive_seq=2675 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004306 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.38 cputime=28.125 memavail=701920 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 572.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=34732 bytes_read=96417 bytes_retransmit=9 bytes_invalid=0 send_seq=2682 receive_seq=2682 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004306 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.38 cputime=28.173 memavail=701832 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 573.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=34822 bytes_read=96675 bytes_retransmit=9 bytes_invalid=0 send_seq=2689 receive_seq=2689 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004305 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.38 cputime=28.219 memavail=701328 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 574.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=34912 bytes_read=96949 bytes_retransmit=9 bytes_invalid=0 send_seq=2696 receive_seq=2696 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004304 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.38 cputime=28.267 memavail=701580 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 575.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35002 bytes_read=97193 bytes_retransmit=9 bytes_invalid=0 send_seq=2703 receive_seq=2703 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004304 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.38 cputime=28.324 memavail=698564 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 576.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35092 bytes_read=97437 bytes_retransmit=9 bytes_invalid=0 send_seq=2710 receive_seq=2710 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004305 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.35 cputime=28.372 memavail=700832 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 577.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35182 bytes_read=97711 bytes_retransmit=9 bytes_invalid=0 send_seq=2717 receive_seq=2717 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004305 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.35 cputime=28.421 memavail=700788 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 578.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35272 bytes_read=97969 bytes_retransmit=9 bytes_invalid=0 send_seq=2724 receive_seq=2724 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004305 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.35 cputime=28.471 memavail=700596 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 579.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35362 bytes_read=98228 bytes_retransmit=9 bytes_invalid=0 send_seq=2731 receive_seq=2731 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004304 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.35 cputime=28.519 memavail=700848 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 580.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35452 bytes_read=98487 bytes_retransmit=9 bytes_invalid=0 send_seq=2738 receive_seq=2738 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004304 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.35 cputime=28.567 memavail=701384 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 581.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35542 bytes_read=98731 bytes_retransmit=9 bytes_invalid=0 send_seq=2745 receive_seq=2745 retransmit_seq=2 srtt=0.003 rttvar=0.002 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004304 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.32 cputime=28.621 memavail=699912 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 582.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35632 bytes_read=98990 bytes_retransmit=9 bytes_invalid=0 send_seq=2752 receive_seq=2752 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004305 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.32 cputime=28.672 memavail=700872 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 583.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35722 bytes_read=99263 bytes_retransmit=9 bytes_invalid=0 send_seq=2759 receive_seq=2759 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004305 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.32 cputime=28.721 memavail=700428 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 584.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35812 bytes_read=99507 bytes_retransmit=9 bytes_invalid=0 send_seq=2766 receive_seq=2766 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004305 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.32 cputime=28.768 memavail=700428 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 585.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35908 bytes_read=99766 bytes_retransmit=9 bytes_invalid=0 send_seq=2774 receive_seq=2773 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004304 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=0.32 cputime=28.816 memavail=701188 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 586.2: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=35998 bytes_read=100041 bytes_retransmit=9 bytes_invalid=0 send_seq=2781 receive_seq=2781 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004302 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=0.38 cputime=28.863 memavail=700688 print_time=632.153 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 767.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=52485 bytes_read=146518 bytes_retransmit=9 bytes_invalid=0 send_seq=4054 receive_seq=4054 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004190 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.67 cputime=37.730 memavail=702872 print_time=873.545 buffer_time=0.722 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 768.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000043 bytes_write=52575 bytes_read=146807 bytes_retransmit=9 bytes_invalid=0 send_seq=4061 receive_seq=4061 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004190 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.67 cputime=37.789 memavail=699272 print_time=873.545 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 769.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000043 bytes_write=52693 bytes_read=147056 bytes_retransmit=9 bytes_invalid=0 send_seq=4069 receive_seq=4069 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004189 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.67 cputime=37.844 memavail=702064 print_time=873.545 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 770.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000043 bytes_write=52783 bytes_read=147300 bytes_retransmit=9 bytes_invalid=0 send_seq=4076 receive_seq=4076 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004188 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.67 cputime=37.892 memavail=701572 print_time=873.545 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.8 pwm=0.000
Stats 771.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000043 bytes_write=52873 bytes_read=147574 bytes_retransmit=9 bytes_invalid=0 send_seq=4083 receive_seq=4083 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004188 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.61 cputime=37.939 memavail=701604 print_time=873.545 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 772.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000017 mcu_task_stddev=0.000043 bytes_write=53121 bytes_read=147828 bytes_retransmit=9 bytes_invalid=0 send_seq=4093 receive_seq=4092 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=19 upcoming_bytes=0 freq=72004187 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.61 cputime=37.994 memavail=701812 print_time=879.038 buffer_time=1.203 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 773.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000018 mcu_task_stddev=0.000042 bytes_write=53230 bytes_read=148092 bytes_retransmit=9 bytes_invalid=0 send_seq=4100 receive_seq=4100 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004186 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.61 cputime=38.042 memavail=702408 print_time=879.038 buffer_time=0.203 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 774.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000018 mcu_task_stddev=0.000042 bytes_write=53329 bytes_read=148366 bytes_retransmit=9 bytes_invalid=0 send_seq=4108 receive_seq=4107 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=19 upcoming_bytes=0 freq=72004188 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.61 cputime=38.095 memavail=701148 print_time=879.038 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 775.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000018 mcu_task_stddev=0.000042 bytes_write=53438 bytes_read=148615 bytes_retransmit=9 bytes_invalid=0 send_seq=4115 receive_seq=4115 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004188 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.61 cputime=38.150 memavail=700896 print_time=879.038 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.8 pwm=0.000
Stats 776.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000018 mcu_task_stddev=0.000042 bytes_write=53528 bytes_read=148859 bytes_retransmit=9 bytes_invalid=0 send_seq=4122 receive_seq=4122 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004187 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.56 cputime=38.200 memavail=700896 print_time=879.038 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Smart Park location: 112.5,112.5.
Stats 777.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000018 mcu_task_stddev=0.000042 bytes_write=54127 bytes_read=149173 bytes_retransmit=9 bytes_invalid=0 send_seq=4138 receive_seq=4137 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=19 upcoming_bytes=0 freq=72004187 heater_bed: target=0 temp=14.1 pwm=0.000  sysload=0.56 cputime=38.262 memavail=701160 print_time=883.389 buffer_time=0.549 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 778.5: gcodein=0  mcu: mcu_awake=0.004 mcu_task_avg=0.000021 mcu_task_stddev=0.000057 bytes_write=54236 bytes_read=149437 bytes_retransmit=9 bytes_invalid=0 send_seq=4145 receive_seq=4145 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004185 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.56 cputime=38.309 memavail=701160 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 779.5: gcodein=0  mcu: mcu_awake=0.004 mcu_task_avg=0.000021 mcu_task_stddev=0.000057 bytes_write=54354 bytes_read=149686 bytes_retransmit=9 bytes_invalid=0 send_seq=4153 receive_seq=4153 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004184 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.56 cputime=38.357 memavail=701192 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 780.5: gcodein=0  mcu: mcu_awake=0.004 mcu_task_avg=0.000021 mcu_task_stddev=0.000057 bytes_write=54444 bytes_read=149960 bytes_retransmit=9 bytes_invalid=0 send_seq=4160 receive_seq=4160 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004184 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.56 cputime=38.407 memavail=700972 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 781.5: gcodein=0  mcu: mcu_awake=0.004 mcu_task_avg=0.000021 mcu_task_stddev=0.000057 bytes_write=54534 bytes_read=150204 bytes_retransmit=9 bytes_invalid=0 send_seq=4167 receive_seq=4167 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004183 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.60 cputime=38.465 memavail=699492 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 782.5: gcodein=0  mcu: mcu_awake=0.004 mcu_task_avg=0.000021 mcu_task_stddev=0.000057 bytes_write=54624 bytes_read=150448 bytes_retransmit=9 bytes_invalid=0 send_seq=4174 receive_seq=4174 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004183 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.60 cputime=38.514 memavail=701220 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 783.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000021 mcu_task_stddev=0.000061 bytes_write=54714 bytes_read=150737 bytes_retransmit=9 bytes_invalid=0 send_seq=4181 receive_seq=4181 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004181 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.60 cputime=38.563 memavail=701524 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 784.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000021 mcu_task_stddev=0.000061 bytes_write=54804 bytes_read=150981 bytes_retransmit=9 bytes_invalid=0 send_seq=4188 receive_seq=4188 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004180 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.60 cputime=38.610 memavail=700968 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 785.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000021 mcu_task_stddev=0.000061 bytes_write=54894 bytes_read=151225 bytes_retransmit=9 bytes_invalid=0 send_seq=4195 receive_seq=4195 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004177 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.60 cputime=38.656 memavail=701300 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 786.5: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000021 mcu_task_stddev=0.000061 bytes_write=54984 bytes_read=151499 bytes_retransmit=9 bytes_invalid=0 send_seq=4202 receive_seq=4202 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004175 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.55 cputime=38.705 memavail=702308 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 787.6: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000021 mcu_task_stddev=0.000061 bytes_write=55074 bytes_read=151743 bytes_retransmit=9 bytes_invalid=0 send_seq=4209 receive_seq=4209 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004176 heater_bed: target=0 temp=14.1 pwm=0.000  sysload=0.55 cputime=38.760 memavail=701784 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 788.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=55164 bytes_read=152000 bytes_retransmit=9 bytes_invalid=0 send_seq=4216 receive_seq=4216 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004175 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.55 cputime=38.810 memavail=701592 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 789.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=55254 bytes_read=152264 bytes_retransmit=9 bytes_invalid=0 send_seq=4223 receive_seq=4223 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004175 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.55 cputime=38.858 memavail=701792 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 790.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=55344 bytes_read=152501 bytes_retransmit=9 bytes_invalid=0 send_seq=4230 receive_seq=4230 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004175 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.55 cputime=38.906 memavail=702132 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 791.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=55434 bytes_read=152752 bytes_retransmit=9 bytes_invalid=0 send_seq=4237 receive_seq=4237 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004174 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.50 cputime=38.952 memavail=702576 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 792.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=55524 bytes_read=153007 bytes_retransmit=9 bytes_invalid=0 send_seq=4244 receive_seq=4244 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004174 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.50 cputime=38.999 memavail=702640 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 793.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=55614 bytes_read=153265 bytes_retransmit=9 bytes_invalid=0 send_seq=4251 receive_seq=4251 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004173 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.50 cputime=39.057 memavail=699112 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 794.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=55704 bytes_read=153524 bytes_retransmit=9 bytes_invalid=0 send_seq=4258 receive_seq=4258 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004174 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.50 cputime=39.113 memavail=701264 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 795.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=55794 bytes_read=153783 bytes_retransmit=9 bytes_invalid=0 send_seq=4265 receive_seq=4265 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004173 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.50 cputime=39.159 memavail=701516 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 796.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=55884 bytes_read=154027 bytes_retransmit=9 bytes_invalid=0 send_seq=4272 receive_seq=4272 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004172 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.46 cputime=39.206 memavail=701516 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 797.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=55974 bytes_read=154286 bytes_retransmit=9 bytes_invalid=0 send_seq=4279 receive_seq=4279 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004172 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.46 cputime=39.253 memavail=701768 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 798.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=56064 bytes_read=154559 bytes_retransmit=9 bytes_invalid=0 send_seq=4286 receive_seq=4286 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004171 heater_bed: target=0 temp=14.1 pwm=0.000  sysload=0.46 cputime=39.301 memavail=702284 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 799.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=56154 bytes_read=154803 bytes_retransmit=9 bytes_invalid=0 send_seq=4293 receive_seq=4293 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004171 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.46 cputime=39.350 memavail=701728 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 800.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=56244 bytes_read=155062 bytes_retransmit=9 bytes_invalid=0 send_seq=4300 receive_seq=4300 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004171 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.46 cputime=39.405 memavail=700076 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 801.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=56334 bytes_read=155321 bytes_retransmit=9 bytes_invalid=0 send_seq=4307 receive_seq=4307 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004170 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.43 cputime=39.451 memavail=700528 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 802.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=56424 bytes_read=155565 bytes_retransmit=9 bytes_invalid=0 send_seq=4314 receive_seq=4314 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004170 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.43 cputime=39.500 memavail=700844 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 803.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=56514 bytes_read=155838 bytes_retransmit=9 bytes_invalid=0 send_seq=4321 receive_seq=4321 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004169 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.43 cputime=39.548 memavail=701404 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.8 pwm=0.000
Stats 804.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=56604 bytes_read=156097 bytes_retransmit=9 bytes_invalid=0 send_seq=4328 receive_seq=4328 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004169 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.43 cputime=39.595 memavail=700848 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 805.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=56694 bytes_read=156341 bytes_retransmit=9 bytes_invalid=0 send_seq=4335 receive_seq=4335 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004169 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.43 cputime=39.646 memavail=700648 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.8 pwm=0.000
Stats 806.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=56784 bytes_read=156600 bytes_retransmit=9 bytes_invalid=0 send_seq=4342 receive_seq=4342 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004171 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.47 cputime=39.705 memavail=700852 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 807.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=56874 bytes_read=156859 bytes_retransmit=9 bytes_invalid=0 send_seq=4349 receive_seq=4349 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004170 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.47 cputime=39.753 memavail=701164 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 808.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=56964 bytes_read=157117 bytes_retransmit=9 bytes_invalid=0 send_seq=4356 receive_seq=4356 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004169 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.47 cputime=39.801 memavail=701168 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 809.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=57054 bytes_read=157376 bytes_retransmit=9 bytes_invalid=0 send_seq=4363 receive_seq=4363 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004168 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.47 cputime=39.850 memavail=700188 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 810.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=57144 bytes_read=157635 bytes_retransmit=9 bytes_invalid=0 send_seq=4370 receive_seq=4370 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004169 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.47 cputime=39.901 memavail=701480 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 811.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=57234 bytes_read=157879 bytes_retransmit=9 bytes_invalid=0 send_seq=4377 receive_seq=4377 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004167 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.43 cputime=39.951 memavail=701428 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 812.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=57324 bytes_read=158138 bytes_retransmit=9 bytes_invalid=0 send_seq=4384 receive_seq=4384 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004166 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.43 cputime=40.009 memavail=701232 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 813.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=57414 bytes_read=158411 bytes_retransmit=9 bytes_invalid=0 send_seq=4391 receive_seq=4391 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004166 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.43 cputime=40.066 memavail=700744 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.8 pwm=0.000
Stats 814.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=57504 bytes_read=158655 bytes_retransmit=9 bytes_invalid=0 send_seq=4398 receive_seq=4398 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004165 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.43 cputime=40.125 memavail=704844 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.8 pwm=0.000
Stats 815.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=57594 bytes_read=158914 bytes_retransmit=9 bytes_invalid=0 send_seq=4405 receive_seq=4405 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004167 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.43 cputime=40.184 memavail=701952 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 816.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=57690 bytes_read=159189 bytes_retransmit=9 bytes_invalid=0 send_seq=4413 receive_seq=4413 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004164 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.48 cputime=40.240 memavail=702464 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 817.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=57780 bytes_read=159447 bytes_retransmit=9 bytes_invalid=0 send_seq=4420 receive_seq=4420 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004164 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.48 cputime=40.292 memavail=702220 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 818.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=57870 bytes_read=159721 bytes_retransmit=9 bytes_invalid=0 send_seq=4427 receive_seq=4427 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004164 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.48 cputime=40.354 memavail=700204 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.8 pwm=0.000
Stats 819.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=57960 bytes_read=159965 bytes_retransmit=9 bytes_invalid=0 send_seq=4434 receive_seq=4434 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004163 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.48 cputime=40.410 memavail=700168 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 820.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=58050 bytes_read=160209 bytes_retransmit=9 bytes_invalid=0 send_seq=4441 receive_seq=4441 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004162 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.48 cputime=40.461 memavail=701008 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 821.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=58140 bytes_read=160483 bytes_retransmit=9 bytes_invalid=0 send_seq=4448 receive_seq=4448 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004161 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.44 cputime=40.513 memavail=701540 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.8 pwm=0.000
Stats 822.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=58230 bytes_read=160727 bytes_retransmit=9 bytes_invalid=0 send_seq=4455 receive_seq=4455 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004161 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.44 cputime=40.563 memavail=701240 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 823.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=58320 bytes_read=160985 bytes_retransmit=9 bytes_invalid=0 send_seq=4462 receive_seq=4462 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004162 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.44 cputime=40.615 memavail=701304 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 824.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=58410 bytes_read=161259 bytes_retransmit=9 bytes_invalid=0 send_seq=4469 receive_seq=4469 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004162 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.44 cputime=40.671 memavail=700064 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 825.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=58500 bytes_read=161503 bytes_retransmit=9 bytes_invalid=0 send_seq=4476 receive_seq=4476 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004162 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.44 cputime=40.720 memavail=701608 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 826.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=58590 bytes_read=161747 bytes_retransmit=9 bytes_invalid=0 send_seq=4483 receive_seq=4483 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004162 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.41 cputime=40.769 memavail=701612 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 827.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=58680 bytes_read=162021 bytes_retransmit=9 bytes_invalid=0 send_seq=4490 receive_seq=4490 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004162 heater_bed: target=0 temp=14.0 pwm=0.000  sysload=0.41 cputime=40.819 memavail=701388 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 828.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=58770 bytes_read=162279 bytes_retransmit=9 bytes_invalid=0 send_seq=4497 receive_seq=4497 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004161 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.41 cputime=40.871 memavail=700884 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.8 pwm=0.000
Stats 829.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=58860 bytes_read=162523 bytes_retransmit=9 bytes_invalid=0 send_seq=4504 receive_seq=4504 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004161 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.41 cputime=40.924 memavail=700648 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 830.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=58950 bytes_read=162797 bytes_retransmit=9 bytes_invalid=0 send_seq=4511 receive_seq=4511 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004159 heater_bed: target=0 temp=14.1 pwm=0.000  sysload=0.41 cputime=40.980 memavail=700452 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 831.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=59040 bytes_read=163041 bytes_retransmit=9 bytes_invalid=0 send_seq=4518 receive_seq=4518 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004161 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.45 cputime=41.039 memavail=700200 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 832.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=59130 bytes_read=163285 bytes_retransmit=9 bytes_invalid=0 send_seq=4525 receive_seq=4525 retransmit_seq=2 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004160 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.45 cputime=41.090 memavail=700704 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 833.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=59220 bytes_read=163573 bytes_retransmit=9 bytes_invalid=0 send_seq=4532 receive_seq=4532 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004158 heater_bed: target=0 temp=14.1 pwm=0.000  sysload=0.45 cputime=41.142 memavail=700736 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 834.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=59310 bytes_read=163817 bytes_retransmit=9 bytes_invalid=0 send_seq=4539 receive_seq=4539 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004157 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.45 cputime=41.194 memavail=700996 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 835.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=59400 bytes_read=164061 bytes_retransmit=9 bytes_invalid=0 send_seq=4546 receive_seq=4546 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004157 heater_bed: target=0 temp=13.8 pwm=0.000  sysload=0.45 cputime=41.246 memavail=700756 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 836.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=59490 bytes_read=164335 bytes_retransmit=9 bytes_invalid=0 send_seq=4553 receive_seq=4553 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004156 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.42 cputime=41.298 memavail=700756 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 837.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=59580 bytes_read=164579 bytes_retransmit=9 bytes_invalid=0 send_seq=4560 receive_seq=4560 retransmit_seq=2 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004156 heater_bed: target=0 temp=13.9 pwm=0.000  sysload=0.42 cputime=41.352 memavail=693476 print_time=883.389 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Starting Klippy...
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-8-g187cc2f1-dirty'
Untracked files: klippy/extras/gcode_shell_command.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Thu Nov 23 15:59:50 2023 (1700755190.2 40.0)
Config error
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/biqu/klipper/klippy/klippy.py", line 134, in _read_config
    config = pconfig.read_main_config()
  File "/home/biqu/klipper/klippy/configfile.py", line 284, in read_main_config
    regular_config = self._build_config_wrapper(regular_data, filename)
  File "/home/biqu/klipper/klippy/configfile.py", line 271, in _build_config_wrapper
    self._parse_config(data, filename, fileconfig, set())
  File "/home/biqu/klipper/klippy/configfile.py", line 259, in _parse_config
    self._resolve_include(filename, include_spec, fileconfig,
  File "/home/biqu/klipper/klippy/configfile.py", line 236, in _resolve_include
    self._parse_config(include_data, include_filename, fileconfig,
  File "/home/biqu/klipper/klippy/configfile.py", line 259, in _parse_config
    self._resolve_include(filename, include_spec, fileconfig,
  File "/home/biqu/klipper/klippy/configfile.py", line 232, in _resolve_include
    raise error("Include file '%s' does not exist" % (include_glob,))
configparser.Error: Include file '/home/biqu/printer_data/config/./KAMP/Smart_Park.cfg' does not exist
webhooks client 281472960540624: New connection
webhooks client 281472960540624: Client info {'program': 'Moonraker', 'version': 'v0.8.0-202-gdddd968'}
webhooks client 281472960540624: Disconnected
Restarting printer
Start printer at Thu Nov 23 16:00:01 2023 (1700755201.1 50.9)
Config error
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/biqu/klipper/klippy/klippy.py", line 134, in _read_config
    config = pconfig.read_main_config()
  File "/home/biqu/klipper/klippy/configfile.py", line 284, in read_main_config
    regular_config = self._build_config_wrapper(regular_data, filename)
  File "/home/biqu/klipper/klippy/configfile.py", line 271, in _build_config_wrapper
    self._parse_config(data, filename, fileconfig, set())
  File "/home/biqu/klipper/klippy/configfile.py", line 259, in _parse_config
    self._resolve_include(filename, include_spec, fileconfig,
  File "/home/biqu/klipper/klippy/configfile.py", line 236, in _resolve_include
    self._parse_config(include_data, include_filename, fileconfig,
  File "/home/biqu/klipper/klippy/configfile.py", line 259, in _parse_config
    self._resolve_include(filename, include_spec, fileconfig,
  File "/home/biqu/klipper/klippy/configfile.py", line 232, in _resolve_include
    raise error("Include file '%s' does not exist" % (include_glob,))
configparser.Error: Include file '/home/biqu/printer_data/config/./KAMP/Smart_Park.cfg' does not exist
webhooks client 281472960590128: New connection
webhooks client 281472960590128: Client info {'program': 'Moonraker', 'version': 'v0.8.0-202-gdddd968'}
webhooks client 281472960590128: Disconnected
Restarting printer
Start printer at Thu Nov 23 16:01:19 2023 (1700755279.9 129.7)
===== Config file =====
[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[mcu]
serial = /dev/serial/by-path/platform-5200000.usb-usb-0:1.3:1.0-port0
restart_method = command

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100

[stepper_x]
step_pin = PC2
dir_pin = !PB9
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_x:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_x]
uart_pin = PC1
run_current = 0.860
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 81
diag_pin = PA5

[stepper_y]
step_pin = PB8
dir_pin = PB7
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_y:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_y]
uart_pin = PC0
run_current = 0.900
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 82
diag_pin = PA6

[stepper_z]
step_pin = PB6
dir_pin = !PB5
enable_pin = !PC3
microsteps = 16
rotation_distance = 4
endstop_pin = probe:z_virtual_endstop
position_min = -4
position_max = 261
homing_speed = 4

[tmc2209 stepper_z]
uart_pin = PA15
run_current = 1.000
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
diag_pin = PA7

[extruder]
max_extrude_only_distance = 100.0
step_pin = PB4
dir_pin = !PB3
enable_pin = !PC3
microsteps = 16
rotation_distance = 4.56
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PA1
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC5
min_temp = 0
max_temp = 300
control = pid
pid_kp = 23.940
pid_ki = 1.629
pid_kd = 87.981

[tmc2209 extruder]
uart_pin = PC14
run_current = 0.550
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3

[heater_bed]
heater_pin = PA2
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 69.445
pid_ki = 1.146
pid_kd = 1052.087

[fan]
pin = PA0

[probe]
pin = PB1
x_offset = 28
y_offset = -20
samples = 2
samples_tolerance = 0.015
samples_tolerance_retries = 5
z_offset = -0.230

[safe_z_home]
home_xy_position = 85,135
z_hop = 10
z_hop_speed = 5

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 28, 20
mesh_max = 210, 205
probe_count = 10
algorithm = bicubic
fade_start = 1
fade_end = 10
fade_target = 0

[display]
lcd_type = st7920
cs_pin = PB12
sclk_pin = PB13
sid_pin = PB15
encoder_pins = ^PB14, ^PB10
click_pin = ^!PB2

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[exclude_object]

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set probe_dock_enable = kamp_settings.probe_dock_enable | abs %}
	{% set attach_macro = kamp_settings.attach_macro | string %}
	{% set detach_macro = kamp_settings.detach_macro | string %}
	{% set mesh_margin = kamp_settings.mesh_margin | float %}
	{% set fuzz_amount = kamp_settings.fuzz_amount | float %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% set fuzz_range = range((0) | int, (fuzz_amount * 100) | int + 1) %}
	{% set adapted_x_min = x_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_y_min = y_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_x_max = x_max + mesh_margin + (fuzz_range | random / 100.0) %}
	{% set adapted_y_max = y_max + mesh_margin + (fuzz_range | random / 100.0) %}
	
	{% set adapted_x_min = [adapted_x_min , bed_mesh_min[0]] | max %}
	{% set adapted_y_min = [adapted_y_min , bed_mesh_min[1]] | max %}
	{% set adapted_x_max = [adapted_x_max , bed_mesh_max[0]] | min %}
	{% set adapted_y_max = [adapted_y_max , bed_mesh_max[1]] | min %}
	
	{% set points_x = (((adapted_x_max - adapted_x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((adapted_y_max - adapted_y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	
	{% set points_x = [points_x , min_points]|max %}
	{% set points_y = [points_y , min_points]|max %}
	{% set points_x = [points_x , probe_count[0]]|min %}
	{% set points_y = [points_y , probe_count[1]]|min %}
	
	{% if verbose_enable == True %}
	{% if printer.exclude_object.objects != [] %}
	
	{ action_respond_info( "Algorithm: {}.".format(
	(algorithm),
	)) }
	
	{ action_respond_info("Default probe count: {},{}.".format(
	(probe_count[0]),
	(probe_count[1]),
	)) }
	
	{ action_respond_info("Adapted probe count: {},{}.".format(
	(points_x),
	(points_y),
	)) }
	
	{action_respond_info("Default mesh bounds: {}, {}.".format(
	(bed_mesh_min[0],bed_mesh_min[1]),
	(bed_mesh_max[0],bed_mesh_max[1]),
	)) }
	
	{% if mesh_margin > 0 %}
	{action_respond_info("Mesh margin is {}, mesh bounds extended by {}mm.".format(
	(mesh_margin),
	(mesh_margin),
	)) }
	{% else %}
	{action_respond_info("Mesh margin is 0, margin not increased.")}
	{% endif %}
	
	{% if fuzz_amount > 0 %}
	{action_respond_info("Mesh point fuzzing enabled, points fuzzed up to {}mm.".format(
	(fuzz_amount),
	)) }
	{% else %}
	{action_respond_info("Fuzz amount is 0, mesh points not fuzzed.")}
	{% endif %}
	
	{ action_respond_info("Adapted mesh bounds: {}, {}.".format(
	(adapted_x_min, adapted_y_min),
	(adapted_x_max, adapted_y_max),
	)) }
	
	{action_respond_info("KAMP adjustments successful. Happy KAMPing!")}
	
	{% else %}
	
	{action_respond_info("No objects detected! Check your gcode and make sure that EXCLUDE_OBJECT_DEFINE is happening before BED_MESH_CALIBRATE is called. Defaulting to regular meshing.")}
	G4 P5000
	{% endif %}
	
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={adapted_x_min},{adapted_y_min} mesh_max={adapted_x_max},{adapted_y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}

[gcode_macro LINE_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set verbose_enable = printer["gcode_macro _KAMP_Settings"].verbose_enable | abs %}
	{% set purge_height = printer["gcode_macro _KAMP_Settings"].purge_height | float %}
	{% set tip_distance = printer["gcode_macro _KAMP_Settings"].tip_distance | float %}
	{% set purge_margin = printer["gcode_macro _KAMP_Settings"].purge_margin | float %}
	{% set purge_amount = printer["gcode_macro _KAMP_Settings"].purge_amount | float %}
	{% set flow_rate = printer["gcode_macro _KAMP_Settings"].flow_rate | float %}
	
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	{% if purge_y_origin > 0 %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_center),
	(purge_y_origin),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% else %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_origin),
	(purge_y_center),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	{% if purge_y_origin > 0 %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_center} Y{purge_y_origin}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 X{purge_x_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% else %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_origin} Y{purge_y_center}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 Y{purge_y_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 Y{purge_y_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% endif %}
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.8
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 10
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro update_git]
gcode = 
	RUN_SHELL_COMMAND CMD=update_git_script

[gcode_shell_command update_git_script]
command = bash /home/biqu/printer_data/klipper-backup/script.sh
timeout = 90.0
verbose = True
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281472952092128: New connection
webhooks client 281472952092128: Client info {'program': 'Moonraker', 'version': 'v0.8.0-202-gdddd968'}
mcu 'mcu': got {'oid': 15, 'next_clock': 3211454080, 'value': 31855, '#name': 'analog_in_state', '#sent_time': 134.122609563, '#receive_time': 134.138818146}
mcu 'mcu': got {'oid': 20, 'next_clock': 3215054080, 'value': 31782, '#name': 'analog_in_state', '#sent_time': 134.17796123, '#receive_time': 134.188815105}
mcu 'mcu': got {'oid': 15, 'next_clock': 3233054080, 'value': 31860, '#name': 'analog_in_state', '#sent_time': 134.39783585499998, '#receive_time': 134.438814521}
mcu 'mcu': got {'oid': 20, 'next_clock': 3236654080, 'value': 31781, '#name': 'analog_in_state', '#sent_time': 134.452423563, '#receive_time': 134.488841438}
Loaded MCU 'mcu' 112 commands (v0.12.0-0-g0d67d9c4 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA10,PA9 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
MCU error during connect
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 180, in _connect
    cb()
  File "/home/biqu/klipper/klippy/mcu.py", line 762, in _connect
    raise error("Failed automated reset of MCU '%s'"
mcu.error: Failed automated reset of MCU 'mcu'
No build file /home/biqu/klipper/klippy/../.config
No build file /home/biqu/klipper/klippy/../out/klipper.dict
No build file /home/biqu/klipper/klippy/../out/klipper.elf
mcu 'mcu': got {'oid': 15, 'next_clock': 3254654080, 'value': 31867, '#name': 'analog_in_state', '#sent_time': 134.51510997999998, '#receive_time': 134.738919938}
mcu 'mcu': got {'oid': 20, 'next_clock': 3258254080, 'value': 31781, '#name': 'analog_in_state', '#sent_time': 134.51510997999998, '#receive_time': 134.789051188}
mcu 'mcu': got {'oid': 15, 'next_clock': 3276254080, 'value': 31858, '#name': 'analog_in_state', '#sent_time': 134.51510997999998, '#receive_time': 135.03897543800002}
mcu 'mcu': got {'oid': 20, 'next_clock': 3279854080, 'value': 31779, '#name': 'analog_in_state', '#sent_time': 134.51510997999998, '#receive_time': 135.088969397}
mcu 'mcu': got {'oid': 15, 'next_clock': 3297854080, 'value': 31862, '#name': 'analog_in_state', '#sent_time': 134.51510997999998, '#receive_time': 135.338731313}
mcu 'mcu': got {'oid': 20, 'next_clock': 3301454080, 'value': 31780, '#name': 'analog_in_state', '#sent_time': 134.51510997999998, '#receive_time': 135.388703314}
mcu 'mcu': got {'oid': 15, 'next_clock': 3319454080, 'value': 31858, '#name': 'analog_in_state', '#sent_time': 135.499762605, '#receive_time': 135.638930605}
mcu 'mcu': got {'oid': 20, 'next_clock': 3323054080, 'value': 31777, '#name': 'analog_in_state', '#sent_time': 135.499762605, '#receive_time': 135.68894435500002}
mcu 'mcu': got {'oid': 15, 'next_clock': 3341054080, 'value': 31861, '#name': 'analog_in_state', '#sent_time': 135.499762605, '#receive_time': 135.938918355}
mcu 'mcu': got {'oid': 20, 'next_clock': 3344654080, 'value': 31783, '#name': 'analog_in_state', '#sent_time': 135.499762605, '#receive_time': 135.988901064}
mcu 'mcu': got {'oid': 15, 'next_clock': 3362654080, 'value': 31855, '#name': 'analog_in_state', '#sent_time': 135.499762605, '#receive_time': 136.23881623100002}
mcu 'mcu': got {'oid': 20, 'next_clock': 3366254080, 'value': 31778, '#name': 'analog_in_state', '#sent_time': 135.499762605, '#receive_time': 136.288782897}
mcu 'mcu': got {'oid': 15, 'next_clock': 3384254080, 'value': 31856, '#name': 'analog_in_state', '#sent_time': 136.484453356, '#receive_time': 136.53878448100002}
mcu 'mcu': got {'oid': 20, 'next_clock': 3387854080, 'value': 31778, '#name': 'analog_in_state', '#sent_time': 136.484453356, '#receive_time': 136.588812147}
mcu 'mcu': got {'oid': 15, 'next_clock': 3405854080, 'value': 31858, '#name': 'analog_in_state', '#sent_time': 136.484453356, '#receive_time': 136.838752064}
mcu 'mcu': got {'oid': 20, 'next_clock': 3409454080, 'value': 31782, '#name': 'analog_in_state', '#sent_time': 136.484453356, '#receive_time': 136.888724273}
mcu 'mcu': got {'oid': 15, 'next_clock': 3427454080, 'value': 31851, '#name': 'analog_in_state', '#sent_time': 136.484453356, '#receive_time': 137.138602314}
mcu 'mcu': got {'oid': 20, 'next_clock': 3431054080, 'value': 31780, '#name': 'analog_in_state', '#sent_time': 136.484453356, '#receive_time': 137.18865064800002}
mcu 'mcu': got {'oid': 15, 'next_clock': 3449054080, 'value': 31860, '#name': 'analog_in_state', '#sent_time': 136.484453356, '#receive_time': 137.438722939}
mcu 'mcu': got {'oid': 20, 'next_clock': 3452654080, 'value': 31780, '#name': 'analog_in_state', '#sent_time': 137.46910085599998, '#receive_time': 137.488726856}
mcu 'mcu': got {'oid': 15, 'next_clock': 3470654080, 'value': 31852, '#name': 'analog_in_state', '#sent_time': 137.46910085599998, '#receive_time': 137.73873548100002}
mcu 'mcu': got {'oid': 20, 'next_clock': 3474254080, 'value': 31779, '#name': 'analog_in_state', '#sent_time': 137.46910085599998, '#receive_time': 137.78869369}
mcu 'mcu': got {'oid': 15, 'next_clock': 3492254080, 'value': 31861, '#name': 'analog_in_state', '#sent_time': 137.46910085599998, '#receive_time': 138.03872973100002}
mcu 'mcu': got {'oid': 20, 'next_clock': 3495854080, 'value': 31782, '#name': 'analog_in_state', '#sent_time': 137.46910085599998, '#receive_time': 138.08858035600002}
mcu 'mcu': got {'oid': 15, 'next_clock': 3513854080, 'value': 31856, '#name': 'analog_in_state', '#sent_time': 137.46910085599998, '#receive_time': 138.33860477300001}
mcu 'mcu': got {'oid': 20, 'next_clock': 3517454080, 'value': 31782, '#name': 'analog_in_state', '#sent_time': 137.46910085599998, '#receive_time': 138.388583273}
mcu 'mcu': got {'oid': 15, 'next_clock': 3535454080, 'value': 31860, '#name': 'analog_in_state', '#sent_time': 138.453632732, '#receive_time': 138.63859164800002}
mcu 'mcu': got {'oid': 20, 'next_clock': 3539054080, 'value': 31784, '#name': 'analog_in_state', '#sent_time': 138.453632732, '#receive_time': 138.688579815}
mcu 'mcu': got {'oid': 15, 'next_clock': 3557054080, 'value': 31859, '#name': 'analog_in_state', '#sent_time': 138.453632732, '#receive_time': 138.938717607}
mcu 'mcu': got {'oid': 20, 'next_clock': 3560654080, 'value': 31780, '#name': 'analog_in_state', '#sent_time': 138.453632732, '#receive_time': 138.988752815}
mcu 'mcu': got {'oid': 15, 'next_clock': 3578654080, 'value': 31856, '#name': 'analog_in_state', '#sent_time': 138.453632732, '#receive_time': 139.23859744}
mcu 'mcu': got {'oid': 20, 'next_clock': 3582254080, 'value': 31778, '#name': 'analog_in_state', '#sent_time': 138.453632732, '#receive_time': 139.28857669}
mcu 'mcu': got {'oid': 15, 'next_clock': 3600254080, 'value': 31853, '#name': 'analog_in_state', '#sent_time': 139.43804869, '#receive_time': 139.538601024}
mcu 'mcu': got {'oid': 20, 'next_clock': 3603854080, 'value': 31780, '#name': 'analog_in_state', '#sent_time': 139.43804869, '#receive_time': 139.58859035700002}
mcu 'mcu': got {'oid': 15, 'next_clock': 3621854080, 'value': 31855, '#name': 'analog_in_state', '#sent_time': 139.43804869, '#receive_time': 139.83859877400002}
mcu 'mcu': got {'oid': 20, 'next_clock': 3625454080, 'value': 31781, '#name': 'analog_in_state', '#sent_time': 139.43804869, '#receive_time': 139.888607482}
mcu 'mcu': got {'oid': 15, 'next_clock': 3643454080, 'value': 31858, '#name': 'analog_in_state', '#sent_time': 139.43804869, '#receive_time': 140.13846619100002}
mcu 'mcu': got {'oid': 20, 'next_clock': 3647054080, 'value': 31785, '#name': 'analog_in_state', '#sent_time': 139.43804869, '#receive_time': 140.18845606600001}
mcu 'mcu': got {'oid': 15, 'next_clock': 3665054080, 'value': 31854, '#name': 'analog_in_state', '#sent_time': 140.42245314899998, '#receive_time': 140.438415858}
mcu 'mcu': got {'oid': 20, 'next_clock': 3668654080, 'value': 31779, '#name': 'analog_in_state', '#sent_time': 140.42245314899998, '#receive_time': 140.48851252400001}
mcu 'mcu': got {'oid': 15, 'next_clock': 3686654080, 'value': 31858, '#name': 'analog_in_state', '#sent_time': 140.42245314899998, '#receive_time': 140.738634899}
mcu 'mcu': got {'oid': 20, 'next_clock': 3690254080, 'value': 31780, '#name': 'analog_in_state', '#sent_time': 140.42245314899998, '#receive_time': 140.788577858}
mcu 'mcu': got {'oid': 15, 'next_clock': 3708254080, 'value': 31856, '#name': 'analog_in_state', '#sent_time': 140.42245314899998, '#receive_time': 141.038601108}
mcu 'mcu': got {'oid': 20, 'next_clock': 3711854080, 'value': 31776, '#name': 'analog_in_state', '#sent_time': 140.42245314899998, '#receive_time': 141.088451983}
mcu 'mcu': got {'oid': 15, 'next_clock': 3729854080, 'value': 31851, '#name': 'analog_in_state', '#sent_time': 140.42245314899998, '#receive_time': 141.338459566}
mcu 'mcu': got {'oid': 20, 'next_clock': 3733454080, 'value': 31777, '#name': 'analog_in_state', '#sent_time': 140.42245314899998, '#receive_time': 141.38847502500002}
mcu 'mcu': got {'oid': 15, 'next_clock': 3751454080, 'value': 31858, '#name': 'analog_in_state', '#sent_time': 141.40718902499998, '#receive_time': 141.638518858}
Attempting MCU 'mcu' reset command
webhooks client 281472952092128: Disconnected
Restarting printer
Start printer at Thu Nov 23 16:01:32 2023 (1700755293.0 142.8)
===== Config file =====
[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[mcu]
serial = /dev/serial/by-path/platform-5200000.usb-usb-0:1.3:1.0-port0
restart_method = command

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100

[stepper_x]
step_pin = PC2
dir_pin = !PB9
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_x:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_x]
uart_pin = PC1
run_current = 0.860
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 81
diag_pin = PA5

[stepper_y]
step_pin = PB8
dir_pin = PB7
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_y:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_y]
uart_pin = PC0
run_current = 0.900
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 82
diag_pin = PA6

[stepper_z]
step_pin = PB6
dir_pin = !PB5
enable_pin = !PC3
microsteps = 16
rotation_distance = 4
endstop_pin = probe:z_virtual_endstop
position_min = -4
position_max = 261
homing_speed = 4

[tmc2209 stepper_z]
uart_pin = PA15
run_current = 1.000
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
diag_pin = PA7

[extruder]
max_extrude_only_distance = 100.0
step_pin = PB4
dir_pin = !PB3
enable_pin = !PC3
microsteps = 16
rotation_distance = 4.56
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PA1
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC5
min_temp = 0
max_temp = 300
control = pid
pid_kp = 23.940
pid_ki = 1.629
pid_kd = 87.981

[tmc2209 extruder]
uart_pin = PC14
run_current = 0.550
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3

[heater_bed]
heater_pin = PA2
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 69.445
pid_ki = 1.146
pid_kd = 1052.087

[fan]
pin = PA0

[probe]
pin = PB1
x_offset = 28
y_offset = -20
samples = 2
samples_tolerance = 0.015
samples_tolerance_retries = 5
z_offset = -0.230

[safe_z_home]
home_xy_position = 85,135
z_hop = 10
z_hop_speed = 5

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 28, 20
mesh_max = 210, 205
probe_count = 10
algorithm = bicubic
fade_start = 1
fade_end = 10
fade_target = 0

[display]
lcd_type = st7920
cs_pin = PB12
sclk_pin = PB13
sid_pin = PB15
encoder_pins = ^PB14, ^PB10
click_pin = ^!PB2

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[exclude_object]

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set probe_dock_enable = kamp_settings.probe_dock_enable | abs %}
	{% set attach_macro = kamp_settings.attach_macro | string %}
	{% set detach_macro = kamp_settings.detach_macro | string %}
	{% set mesh_margin = kamp_settings.mesh_margin | float %}
	{% set fuzz_amount = kamp_settings.fuzz_amount | float %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% set fuzz_range = range((0) | int, (fuzz_amount * 100) | int + 1) %}
	{% set adapted_x_min = x_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_y_min = y_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_x_max = x_max + mesh_margin + (fuzz_range | random / 100.0) %}
	{% set adapted_y_max = y_max + mesh_margin + (fuzz_range | random / 100.0) %}
	
	{% set adapted_x_min = [adapted_x_min , bed_mesh_min[0]] | max %}
	{% set adapted_y_min = [adapted_y_min , bed_mesh_min[1]] | max %}
	{% set adapted_x_max = [adapted_x_max , bed_mesh_max[0]] | min %}
	{% set adapted_y_max = [adapted_y_max , bed_mesh_max[1]] | min %}
	
	{% set points_x = (((adapted_x_max - adapted_x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((adapted_y_max - adapted_y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	
	{% set points_x = [points_x , min_points]|max %}
	{% set points_y = [points_y , min_points]|max %}
	{% set points_x = [points_x , probe_count[0]]|min %}
	{% set points_y = [points_y , probe_count[1]]|min %}
	
	{% if verbose_enable == True %}
	{% if printer.exclude_object.objects != [] %}
	
	{ action_respond_info( "Algorithm: {}.".format(
	(algorithm),
	)) }
	
	{ action_respond_info("Default probe count: {},{}.".format(
	(probe_count[0]),
	(probe_count[1]),
	)) }
	
	{ action_respond_info("Adapted probe count: {},{}.".format(
	(points_x),
	(points_y),
	)) }
	
	{action_respond_info("Default mesh bounds: {}, {}.".format(
	(bed_mesh_min[0],bed_mesh_min[1]),
	(bed_mesh_max[0],bed_mesh_max[1]),
	)) }
	
	{% if mesh_margin > 0 %}
	{action_respond_info("Mesh margin is {}, mesh bounds extended by {}mm.".format(
	(mesh_margin),
	(mesh_margin),
	)) }
	{% else %}
	{action_respond_info("Mesh margin is 0, margin not increased.")}
	{% endif %}
	
	{% if fuzz_amount > 0 %}
	{action_respond_info("Mesh point fuzzing enabled, points fuzzed up to {}mm.".format(
	(fuzz_amount),
	)) }
	{% else %}
	{action_respond_info("Fuzz amount is 0, mesh points not fuzzed.")}
	{% endif %}
	
	{ action_respond_info("Adapted mesh bounds: {}, {}.".format(
	(adapted_x_min, adapted_y_min),
	(adapted_x_max, adapted_y_max),
	)) }
	
	{action_respond_info("KAMP adjustments successful. Happy KAMPing!")}
	
	{% else %}
	
	{action_respond_info("No objects detected! Check your gcode and make sure that EXCLUDE_OBJECT_DEFINE is happening before BED_MESH_CALIBRATE is called. Defaulting to regular meshing.")}
	G4 P5000
	{% endif %}
	
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={adapted_x_min},{adapted_y_min} mesh_max={adapted_x_max},{adapted_y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}

[gcode_macro LINE_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set verbose_enable = printer["gcode_macro _KAMP_Settings"].verbose_enable | abs %}
	{% set purge_height = printer["gcode_macro _KAMP_Settings"].purge_height | float %}
	{% set tip_distance = printer["gcode_macro _KAMP_Settings"].tip_distance | float %}
	{% set purge_margin = printer["gcode_macro _KAMP_Settings"].purge_margin | float %}
	{% set purge_amount = printer["gcode_macro _KAMP_Settings"].purge_amount | float %}
	{% set flow_rate = printer["gcode_macro _KAMP_Settings"].flow_rate | float %}
	
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	{% if purge_y_origin > 0 %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_center),
	(purge_y_origin),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% else %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_origin),
	(purge_y_center),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	{% if purge_y_origin > 0 %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_center} Y{purge_y_origin}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 X{purge_x_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% else %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_origin} Y{purge_y_center}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 Y{purge_y_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 Y{purge_y_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% endif %}
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.8
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 10
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro update_git]
gcode = 
	RUN_SHELL_COMMAND CMD=update_git_script

[gcode_shell_command update_git_script]
command = bash /home/biqu/printer_data/klipper-backup/script.sh
timeout = 90.0
verbose = True
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281472952754672: New connection
webhooks client 281472952754672: Client info {'program': 'Moonraker', 'version': 'v0.8.0-202-gdddd968'}
Loaded MCU 'mcu' 112 commands (v0.12.0-0-g0d67d9c4 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=72000000 MCU=stm32f103xe PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_serial=PA10,PA9 SERIAL_BAUD=250000 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Enabling TMC virtual enable for 'stepper_x'
Enabling TMC virtual enable for 'stepper_y'
Enabling TMC virtual enable for 'stepper_z'
Enabling TMC virtual enable for 'extruder'
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (0.0, 40.0)     | (28.0, 20.0)
  1   | (20.2, 40.0)    | (48.2, 20.0)
  2   | (40.4, 40.0)    | (68.4, 20.0)
  3   | (60.7, 40.0)    | (88.7, 20.0)
  4   | (80.9, 40.0)    | (108.9, 20.0)
  5   | (101.1, 40.0)   | (129.1, 20.0)
  6   | (121.3, 40.0)   | (149.3, 20.0)
  7   | (141.5, 40.0)   | (169.5, 20.0)
  8   | (161.8, 40.0)   | (189.8, 20.0)
  9   | (182.0, 40.0)   | (210.0, 20.0)
  10  | (182.0, 60.5)   | (210.0, 40.5)
  11  | (161.8, 60.5)   | (189.8, 40.5)
  12  | (141.5, 60.5)   | (169.5, 40.5)
  13  | (121.3, 60.5)   | (149.3, 40.5)
  14  | (101.1, 60.5)   | (129.1, 40.5)
  15  | (80.9, 60.5)    | (108.9, 40.5)
  16  | (60.7, 60.5)    | (88.7, 40.5)
  17  | (40.4, 60.5)    | (68.4, 40.5)
  18  | (20.2, 60.5)    | (48.2, 40.5)
  19  | (0.0, 60.5)     | (28.0, 40.5)
  20  | (0.0, 81.1)     | (28.0, 61.1)
  21  | (20.2, 81.1)    | (48.2, 61.1)
  22  | (40.4, 81.1)    | (68.4, 61.1)
  23  | (60.7, 81.1)    | (88.7, 61.1)
  24  | (80.9, 81.1)    | (108.9, 61.1)
  25  | (101.1, 81.1)   | (129.1, 61.1)
  26  | (121.3, 81.1)   | (149.3, 61.1)
  27  | (141.5, 81.1)   | (169.5, 61.1)
  28  | (161.8, 81.1)   | (189.8, 61.1)
  29  | (182.0, 81.1)   | (210.0, 61.1)
  30  | (182.0, 101.6)  | (210.0, 81.6)
  31  | (161.8, 101.6)  | (189.8, 81.6)
  32  | (141.5, 101.6)  | (169.5, 81.6)
  33  | (121.3, 101.6)  | (149.3, 81.6)
  34  | (101.1, 101.6)  | (129.1, 81.6)
  35  | (80.9, 101.6)   | (108.9, 81.6)
  36  | (60.7, 101.6)   | (88.7, 81.6)
  37  | (40.4, 101.6)   | (68.4, 81.6)
  38  | (20.2, 101.6)   | (48.2, 81.6)
  39  | (0.0, 101.6)    | (28.0, 81.6)
  40  | (0.0, 122.2)    | (28.0, 102.2)
  41  | (20.2, 122.2)   | (48.2, 102.2)
  42  | (40.4, 122.2)   | (68.4, 102.2)
  43  | (60.7, 122.2)   | (88.7, 102.2)
  44  | (80.9, 122.2)   | (108.9, 102.2)
  45  | (101.1, 122.2)  | (129.1, 102.2)
  46  | (121.3, 122.2)  | (149.3, 102.2)
  47  | (141.5, 122.2)  | (169.5, 102.2)
  48  | (161.8, 122.2)  | (189.8, 102.2)
  49  | (182.0, 122.2)  | (210.0, 102.2)
  50  | (182.0, 142.8)  | (210.0, 122.7)
  51  | (161.8, 142.8)  | (189.8, 122.7)
  52  | (141.5, 142.8)  | (169.5, 122.7)
  53  | (121.3, 142.8)  | (149.3, 122.7)
  54  | (101.1, 142.8)  | (129.1, 122.7)
  55  | (80.9, 142.8)   | (108.9, 122.7)
  56  | (60.7, 142.8)   | (88.7, 122.7)
  57  | (40.4, 142.8)   | (68.4, 122.7)
  58  | (20.2, 142.8)   | (48.2, 122.7)
  59  | (0.0, 142.8)    | (28.0, 122.7)
  60  | (0.0, 163.3)    | (28.0, 143.3)
  61  | (20.2, 163.3)   | (48.2, 143.3)
  62  | (40.4, 163.3)   | (68.4, 143.3)
  63  | (60.7, 163.3)   | (88.7, 143.3)
  64  | (80.9, 163.3)   | (108.9, 143.3)
  65  | (101.1, 163.3)  | (129.1, 143.3)
  66  | (121.3, 163.3)  | (149.3, 143.3)
  67  | (141.5, 163.3)  | (169.5, 143.3)
  68  | (161.8, 163.3)  | (189.8, 143.3)
  69  | (182.0, 163.3)  | (210.0, 143.3)
  70  | (182.0, 183.8)  | (210.0, 163.8)
  71  | (161.8, 183.8)  | (189.8, 163.8)
  72  | (141.5, 183.8)  | (169.5, 163.8)
  73  | (121.3, 183.8)  | (149.3, 163.8)
  74  | (101.1, 183.8)  | (129.1, 163.8)
  75  | (80.9, 183.8)   | (108.9, 163.8)
  76  | (60.7, 183.8)   | (88.7, 163.8)
  77  | (40.4, 183.8)   | (68.4, 163.8)
  78  | (20.2, 183.8)   | (48.2, 163.8)
  79  | (0.0, 183.8)    | (28.0, 163.8)
  80  | (0.0, 204.4)    | (28.0, 184.4)
  81  | (20.2, 204.4)   | (48.2, 184.4)
  82  | (40.4, 204.4)   | (68.4, 184.4)
  83  | (60.7, 204.4)   | (88.7, 184.4)
  84  | (80.9, 204.4)   | (108.9, 184.4)
  85  | (101.1, 204.4)  | (129.1, 184.4)
  86  | (121.3, 204.4)  | (149.3, 184.4)
  87  | (141.5, 204.4)  | (169.5, 184.4)
  88  | (161.8, 204.4)  | (189.8, 184.4)
  89  | (182.0, 204.4)  | (210.0, 184.4)
  90  | (182.0, 225.0)  | (210.0, 205.0)
  91  | (161.8, 225.0)  | (189.8, 205.0)
  92  | (141.5, 225.0)  | (169.5, 205.0)
  93  | (121.3, 225.0)  | (149.3, 205.0)
  94  | (101.1, 225.0)  | (129.1, 205.0)
  95  | (80.9, 225.0)   | (108.9, 205.0)
  96  | (60.7, 225.0)   | (88.7, 205.0)
  97  | (40.4, 225.0)   | (68.4, 205.0)
  98  | (20.2, 225.0)   | (48.2, 205.0)
  99  | (0.0, 225.0)    | (28.0, 205.0)
Starting heater checks for extruder
Stats 147.8: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=2721 bytes_read=5539 bytes_retransmit=0 bytes_invalid=0 send_seq=201 receive_seq=198 retransmit_seq=0 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=1397 upcoming_bytes=728 freq=72004120 heater_bed: target=0 temp=0.0 pwm=0.000  sysload=1.17 cputime=9.941 memavail=693516 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
Stats 148.8: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000047 mcu_task_stddev=0.000171 bytes_write=5108 bytes_read=5916 bytes_retransmit=0 bytes_invalid=0 send_seq=248 receive_seq=248 retransmit_seq=0 srtt=0.004 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72005488 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=1.17 cputime=10.024 memavail=691848 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281472952754672
webhooks: registering remote method 'reboot_machine' for connection id: 281472952754672
webhooks: registering remote method 'pause_job_queue' for connection id: 281472952754672
webhooks: registering remote method 'start_job_queue' for connection id: 281472952754672
Stats 149.8: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000047 mcu_task_stddev=0.000171 bytes_write=5114 bytes_read=6037 bytes_retransmit=0 bytes_invalid=0 send_seq=249 receive_seq=249 retransmit_seq=0 srtt=0.004 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004727 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=1.17 cputime=10.109 memavail=694960 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 150.8: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000047 mcu_task_stddev=0.000171 bytes_write=5120 bytes_read=6158 bytes_retransmit=0 bytes_invalid=0 send_seq=250 receive_seq=250 retransmit_seq=0 srtt=0.004 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004250 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=1.08 cputime=10.141 memavail=694948 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 151.8: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000047 mcu_task_stddev=0.000171 bytes_write=5126 bytes_read=6264 bytes_retransmit=0 bytes_invalid=0 send_seq=251 receive_seq=251 retransmit_seq=0 srtt=0.004 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004142 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=1.08 cputime=10.171 memavail=695260 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 152.8: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000047 mcu_task_stddev=0.000171 bytes_write=5132 bytes_read=6385 bytes_retransmit=0 bytes_invalid=0 send_seq=252 receive_seq=252 retransmit_seq=0 srtt=0.004 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004174 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=1.08 cputime=10.202 memavail=695424 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 153.8: gcodein=0  mcu: mcu_awake=0.049 mcu_task_avg=0.000285 mcu_task_stddev=0.000472 bytes_write=5138 bytes_read=6523 bytes_retransmit=0 bytes_invalid=0 send_seq=253 receive_seq=253 retransmit_seq=0 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004128 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=1.08 cputime=10.233 memavail=695520 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 154.8: gcodein=0  mcu: mcu_awake=0.049 mcu_task_avg=0.000285 mcu_task_stddev=0.000472 bytes_write=5144 bytes_read=6629 bytes_retransmit=0 bytes_invalid=0 send_seq=254 receive_seq=254 retransmit_seq=0 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004096 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=1.08 cputime=10.266 memavail=689808 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 155.8: gcodein=0  mcu: mcu_awake=0.049 mcu_task_avg=0.000285 mcu_task_stddev=0.000472 bytes_write=5150 bytes_read=6750 bytes_retransmit=0 bytes_invalid=0 send_seq=255 receive_seq=255 retransmit_seq=0 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004108 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=1.07 cputime=10.302 memavail=691732 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 156.8: gcodein=0  mcu: mcu_awake=0.049 mcu_task_avg=0.000285 mcu_task_stddev=0.000472 bytes_write=5156 bytes_read=6871 bytes_retransmit=0 bytes_invalid=0 send_seq=256 receive_seq=256 retransmit_seq=0 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004096 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=1.07 cputime=10.332 memavail=691732 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 157.8: gcodein=0  mcu: mcu_awake=0.049 mcu_task_avg=0.000285 mcu_task_stddev=0.000472 bytes_write=5162 bytes_read=6977 bytes_retransmit=0 bytes_invalid=0 send_seq=257 receive_seq=257 retransmit_seq=0 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004081 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=1.07 cputime=10.362 memavail=692748 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 158.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000007 bytes_write=5168 bytes_read=7111 bytes_retransmit=0 bytes_invalid=0 send_seq=258 receive_seq=258 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004063 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=1.07 cputime=10.392 memavail=692500 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 159.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000007 bytes_write=5174 bytes_read=7232 bytes_retransmit=0 bytes_invalid=0 send_seq=259 receive_seq=259 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004053 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=1.07 cputime=10.423 memavail=692752 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 160.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000007 bytes_write=5180 bytes_read=7338 bytes_retransmit=0 bytes_invalid=0 send_seq=260 receive_seq=260 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004049 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=0.99 cputime=10.455 memavail=692288 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 161.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000007 bytes_write=5186 bytes_read=7459 bytes_retransmit=0 bytes_invalid=0 send_seq=261 receive_seq=261 retransmit_seq=0 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004054 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=0.99 cputime=10.491 memavail=692260 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.4 pwm=0.000
Stats 162.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000007 bytes_write=5211 bytes_read=7590 bytes_retransmit=0 bytes_invalid=0 send_seq=264 receive_seq=264 retransmit_seq=0 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004068 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=0.99 cputime=10.522 memavail=692068 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 163.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000015 bytes_write=5236 bytes_read=7719 bytes_retransmit=0 bytes_invalid=0 send_seq=267 receive_seq=267 retransmit_seq=0 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004060 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=0.99 cputime=10.553 memavail=692068 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 164.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000015 bytes_write=5242 bytes_read=7840 bytes_retransmit=0 bytes_invalid=0 send_seq=268 receive_seq=268 retransmit_seq=0 srtt=0.003 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004058 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=0.99 cputime=10.584 memavail=692068 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 165.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000015 bytes_write=5248 bytes_read=7961 bytes_retransmit=0 bytes_invalid=0 send_seq=269 receive_seq=269 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004054 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=0.99 cputime=10.614 memavail=692324 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.7 pwm=0.000
Stats 166.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000015 bytes_write=5254 bytes_read=8067 bytes_retransmit=0 bytes_invalid=0 send_seq=270 receive_seq=270 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004097 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=0.99 cputime=10.644 memavail=692364 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.4 pwm=0.000
Stats 167.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000015 bytes_write=5266 bytes_read=8204 bytes_retransmit=0 bytes_invalid=0 send_seq=272 receive_seq=272 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004083 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=0.99 cputime=10.679 memavail=690608 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 168.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000007 bytes_write=5272 bytes_read=8338 bytes_retransmit=0 bytes_invalid=0 send_seq=273 receive_seq=273 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004073 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=0.99 cputime=10.713 memavail=692624 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 169.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000007 bytes_write=5278 bytes_read=8444 bytes_retransmit=0 bytes_invalid=0 send_seq=274 receive_seq=274 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004068 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=0.99 cputime=10.747 memavail=692572 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 170.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000007 bytes_write=5284 bytes_read=8565 bytes_retransmit=0 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004061 heater_bed: target=0 temp=13.7 pwm=0.000  sysload=1.15 cputime=10.777 memavail=693380 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.4 pwm=0.000
Stats 171.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000007 bytes_write=5309 bytes_read=8696 bytes_retransmit=0 bytes_invalid=0 send_seq=278 receive_seq=278 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004056 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=1.15 cputime=10.808 memavail=693588 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 172.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000007 bytes_write=5334 bytes_read=8812 bytes_retransmit=0 bytes_invalid=0 send_seq=281 receive_seq=281 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004052 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=1.15 cputime=10.837 memavail=693416 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.5 pwm=0.000
Stats 173.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000015 bytes_write=5340 bytes_read=8946 bytes_retransmit=0 bytes_invalid=0 send_seq=282 receive_seq=282 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004050 heater_bed: target=0 temp=13.6 pwm=0.000  sysload=1.15 cputime=10.877 memavail=693620 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.6 pwm=0.000
Stats 174.8: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000012 mcu_task_stddev=0.000015 bytes_write=5346 bytes_read=9067 bytes_retransmit=0 bytes_invalid=0 send_seq=283 receive_seq=283 retransmit_seq=0 srtt=0.003 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=72004045 heater_bed: target=0 temp=13.5 pwm=0.000  sysload=1.15 cputime=10.910 memavail=692420 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=15.3 pwm=0.000
Starting Klippy...
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-8-g187cc2f1-dirty'
Untracked files: klippy/extras/gcode_shell_command.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Thu Nov 23 15:59:18 2023 (1700755158.8 19.8)
===== Config file =====
[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[mcu]
serial = /dev/serial/by-path/platform-5200000.usb-usb-0:1.3:1.0-port0
restart_method = command

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100

[stepper_x]
step_pin = PC2
dir_pin = !PB9
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_x:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_x]
uart_pin = PC1
run_current = 0.860
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 81
diag_pin = PA5

[stepper_y]
step_pin = PB8
dir_pin = PB7
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = tmc2209_stepper_y:virtual_endstop
position_endstop = 0
position_max = 225
homing_speed = 40
homing_retract_dist = 0

[tmc2209 stepper_y]
uart_pin = PC0
run_current = 0.900
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
driver_sgthrs = 82
diag_pin = PA6

[stepper_z]
step_pin = PB6
dir_pin = !PB5
enable_pin = !PC3
microsteps = 16
rotation_distance = 4
endstop_pin = probe:z_virtual_endstop
position_min = -4
position_max = 261
homing_speed = 4

[tmc2209 stepper_z]
uart_pin = PA15
run_current = 1.000
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3
diag_pin = PA7

[extruder]
max_extrude_only_distance = 100.0
step_pin = PB4
dir_pin = !PB3
enable_pin = !PC3
microsteps = 16
rotation_distance = 4.56
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PA1
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC5
min_temp = 0
max_temp = 300
control = pid
pid_kp = 23.940
pid_ki = 1.629
pid_kd = 87.981

[tmc2209 extruder]
uart_pin = PC14
run_current = 0.550
stealthchop_threshold = 0
interpolate = False
sense_resistor = 0.150
uart_address = 3

[heater_bed]
heater_pin = PA2
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 69.445
pid_ki = 1.146
pid_kd = 1052.087

[fan]
pin = PA0

[probe]
pin = PB1
x_offset = 28
y_offset = -20
samples = 2
samples_tolerance = 0.015
samples_tolerance_retries = 5
z_offset = -0.230

[safe_z_home]
home_xy_position = 85,135
z_hop = 10
z_hop_speed = 5

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 28, 20
mesh_max = 210, 205
probe_count = 10
algorithm = bicubic
fade_start = 1
fade_end = 10
fade_target = 0

[display]
lcd_type = st7920
cs_pin = PB12
sclk_pin = PB13
sid_pin = PB15
encoder_pins = ^PB14, ^PB10
click_pin = ^!PB2

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[exclude_object]

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set probe_dock_enable = kamp_settings.probe_dock_enable | abs %}
	{% set attach_macro = kamp_settings.attach_macro | string %}
	{% set detach_macro = kamp_settings.detach_macro | string %}
	{% set mesh_margin = kamp_settings.mesh_margin | float %}
	{% set fuzz_amount = kamp_settings.fuzz_amount | float %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% set fuzz_range = range((0) | int, (fuzz_amount * 100) | int + 1) %}
	{% set adapted_x_min = x_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_y_min = y_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_x_max = x_max + mesh_margin + (fuzz_range | random / 100.0) %}
	{% set adapted_y_max = y_max + mesh_margin + (fuzz_range | random / 100.0) %}
	
	{% set adapted_x_min = [adapted_x_min , bed_mesh_min[0]] | max %}
	{% set adapted_y_min = [adapted_y_min , bed_mesh_min[1]] | max %}
	{% set adapted_x_max = [adapted_x_max , bed_mesh_max[0]] | min %}
	{% set adapted_y_max = [adapted_y_max , bed_mesh_max[1]] | min %}
	
	{% set points_x = (((adapted_x_max - adapted_x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((adapted_y_max - adapted_y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	
	{% set points_x = [points_x , min_points]|max %}
	{% set points_y = [points_y , min_points]|max %}
	{% set points_x = [points_x , probe_count[0]]|min %}
	{% set points_y = [points_y , probe_count[1]]|min %}
	
	{% if verbose_enable == True %}
	{% if printer.exclude_object.objects != [] %}
	
	{ action_respond_info( "Algorithm: {}.".format(
	(algorithm),
	)) }
	
	{ action_respond_info("Default probe count: {},{}.".format(
	(probe_count[0]),
	(probe_count[1]),
	)) }
	
	{ action_respond_info("Adapted probe count: {},{}.".format(
	(points_x),
	(points_y),
	)) }
	
	{action_respond_info("Default mesh bounds: {}, {}.".format(
	(bed_mesh_min[0],bed_mesh_min[1]),
	(bed_mesh_max[0],bed_mesh_max[1]),
	)) }
	
	{% if mesh_margin > 0 %}
	{action_respond_info("Mesh margin is {}, mesh bounds extended by {}mm.".format(
	(mesh_margin),
	(mesh_margin),
	)) }
	{% else %}
	{action_respond_info("Mesh margin is 0, margin not increased.")}
	{% endif %}
	
	{% if fuzz_amount > 0 %}
	{action_respond_info("Mesh point fuzzing enabled, points fuzzed up to {}mm.".format(
	(fuzz_amount),
	)) }
	{% else %}
	{action_respond_info("Fuzz amount is 0, mesh points not fuzzed.")}
	{% endif %}
	
	{ action_respond_info("Adapted mesh bounds: {}, {}.".format(
	(adapted_x_min, adapted_y_min),
	(adapted_x_max, adapted_y_max),
	)) }
	
	{action_respond_info("KAMP adjustments successful. Happy KAMPing!")}
	
	{% else %}
	
	{action_respond_info("No objects detected! Check your gcode and make sure that EXCLUDE_OBJECT_DEFINE is happening before BED_MESH_CALIBRATE is called. Defaulting to regular meshing.")}
	G4 P5000
	{% endif %}
	
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={adapted_x_min},{adapted_y_min} mesh_max={adapted_x_max},{adapted_y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}

[gcode_macro LINE_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set verbose_enable = printer["gcode_macro _KAMP_Settings"].verbose_enable | abs %}
	{% set purge_height = printer["gcode_macro _KAMP_Settings"].purge_height | float %}
	{% set tip_distance = printer["gcode_macro _KAMP_Settings"].tip_distance | float %}
	{% set purge_margin = printer["gcode_macro _KAMP_Settings"].purge_margin | float %}
	{% set purge_amount = printer["gcode_macro _KAMP_Settings"].purge_amount | float %}
	{% set flow_rate = printer["gcode_macro _KAMP_Settings"].flow_rate | float %}
	
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	{% if purge_y_origin > 0 %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_center),
	(purge_y_origin),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% else %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm/s3.".format(
	(purge_x_origin),
	(purge_y_center),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	{% if purge_y_origin > 0 %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_center} Y{purge_y_origin}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 X{purge_x_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% else %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_origin} Y{purge_y_center}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 Y{purge_y_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 Y{purge_y_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% endif %}
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.8
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 10
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro update_git]
gcode = 
	RUN_SHELL_COMMAND CMD=update_git_script

[gcode_shell_command update_git_script]
command = bash /home/biqu/printer_data/klipper-backup/script.sh
timeout = 90.0
verbose = True
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
